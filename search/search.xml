<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Next主题评论系统由Valine迁移至Waline</title>
      <link href="/posts/3368d4d6/"/>
      <url>/posts/3368d4d6/</url>
      
        <content type="html"><![CDATA[<p>由于之前使用的Valine评论系统，在看到网上大量关于Valine垃圾评论的消息后，决定迁移到Waline评论系统。</p><h2 id="初始化Waline"><a href="#初始化Waline" class="headerlink" title="初始化Waline"></a>初始化Waline</h2><ul><li><p>初始化Waline教程请参阅官方教程：<a href="https://waline.js.org/guide/get-started.html">点击访问Waline初始化教程</a>，关于leancloud的相关操作可参考我的这篇 <a href="https://blog.yileaf.com/posts/74e90fd6/">Hexo 集成 Valine 评论系统</a>。</p></li><li><p>按照官方文档部署成功后可参照下图所示配置自定义域名。</p></li></ul><span id="more"></span>  <img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210729140734.png" alt="" style="zoom:60%;" /><ul><li>上图Domains下的域名即为你的Waline服务地址，请访问 <code>Waline服务地址/ui/register</code> 进行注册。首个注册的人会被设定成管理员。</li></ul><h2 id="Next-主题安装-Waline"><a href="#Next-主题安装-Waline" class="headerlink" title="Next 主题安装 Waline"></a>Next 主题安装 Waline</h2><ul><li><p>在博客根目录下执行<a href="https://github.com/rqh656418510/hexo-waline-next">Waline插件</a>安装命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-waline-next --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>打开主题配置文件填写Waline相关配置。</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Waline</span><span class="token comment"># For more information: https://waline.js.org, https://github.com/lizheming/waline</span><span class="token key atrule">waline</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#启用Waline</span>  <span class="token key atrule">serverURL</span><span class="token punctuation">:</span>  <span class="token comment"># Waline服务地址</span>  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> wavatar <span class="token comment"># 默认头像</span>  <span class="token key atrule">avatarCDN</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//sdn.geekzu.org/avatar/ <span class="token comment"># 头像cdn加速地址</span>  <span class="token key atrule">meta</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>nick<span class="token punctuation">,</span> mail<span class="token punctuation">,</span> link<span class="token punctuation">]</span>  <span class="token comment"># Custom comment header</span>  <span class="token key atrule">requiredMeta</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>nick<span class="token punctuation">,</span> mail<span class="token punctuation">]</span> <span class="token comment"># Set required fields: [nick] | [nick, mail]</span>  <span class="token key atrule">pageSize</span><span class="token punctuation">:</span> <span class="token number">10</span>   <span class="token comment"># Pagination size</span>  <span class="token key atrule">lang</span><span class="token punctuation">:</span> zh<span class="token punctuation">-</span>cn  <span class="token comment"># Language, available values: en, zh-cn</span>  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 文章阅读统计</span>  <span class="token key atrule">comment_count</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># If false, comment count will only be displayed in post page, not in home page</span>  <span class="token key atrule">libUrl</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js <span class="token comment"># waline client cdn</span>  <span class="token comment"># 自定义加载emoji,支持内容参见 https://cdn.jsdelivr.net/gh/walinejs/emojis/</span>  <span class="token key atrule">emoji</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span>    <span class="token string">'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo'</span><span class="token punctuation">,</span>    <span class="token string">'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili'</span><span class="token punctuation">,</span>    <span class="token string">'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji'</span><span class="token punctuation">,</span>    <span class="token string">'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq'</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span>  <span class="token key atrule">locale</span><span class="token punctuation">:</span>    <span class="token key atrule">placeholder</span><span class="token punctuation">:</span> ヾﾉ≧∀≦)o来啊，快活啊<span class="token tag">!</span>   <span class="token comment"># 默认输入框显示内容older</span>    <span class="token key atrule">admin</span><span class="token punctuation">:</span> 博主    <span class="token key atrule">nick</span><span class="token punctuation">:</span> 昵称    <span class="token key atrule">mail</span><span class="token punctuation">:</span> 邮箱    <span class="token key atrule">link</span><span class="token punctuation">:</span> 网址  <span class="token key atrule">copyright</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 是否显示页脚版权信息    </span>  <span class="token key atrule">dark</span><span class="token punctuation">:</span> auto <span class="token comment"># Dark mode css selector, for more information: https://waline.js.org/client/basic.html#dark </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="配置评论通知"><a href="#配置评论通知" class="headerlink" title="配置评论通知"></a>配置评论通知</h2><p>参考至<a href="https://waline.js.org/guide/server/notification.html#%E9%82%AE%E4%BB%B6%E9%80%9A%E7%9F%A5">官方文档</a>，由于回复评论者仅支持邮件通知，本站采用该方式进行配置演示。</p><ol><li><p>根据 <a href="https://github.com/nodemailer/nodemailer/blob/master/lib/well-known/services.json">这里</a> 查看所有支持的运营商，本次选择QQ邮箱。</p></li><li><p>开通QQ邮箱SMTP服务，并获取授权码, 具体操作请Google。</p></li><li><p>将以下邮件通知环境变量依次加入vercel中部署的waline服务，示例如下：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># ------ 必填 ------</span>SMTP_SERVICE<span class="token punctuation">:</span>QQ <span class="token comment">#SMTP 邮件发送服务提供商</span><span class="token key atrule">SMTP_USER</span><span class="token punctuation">:</span> <span class="token important">****.qq.com</span> <span class="token comment">#QQ邮箱账号</span><span class="token key atrule">SMTP_PASS</span><span class="token punctuation">:</span> <span class="token comment">#第二步生成的授权码</span><span class="token key atrule">SITE_NAME</span><span class="token punctuation">:</span> <span class="token comment">#网站名称</span><span class="token key atrule">SITE_URL</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//<span class="token punctuation">...</span>..com <span class="token comment">#网站地址</span><span class="token comment"># ------ 推荐填写 ------</span><span class="token key atrule">AUTHOR_EMAIL</span><span class="token punctuation">:</span> <span class="token comment">#博主邮箱,该邮箱评论不会通知你</span><span class="token comment"># ------ 选择性填写 ------ 参考源码:https://github.com/walinejs/waline/blob/master/packages/server/src/service/notify.js</span><span class="token key atrule">MAIL_SUBJECT_ADMIN</span><span class="token punctuation">:</span> 您的博客『<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>site.name<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>』收到了新评论 🕊  <span class="token comment">#发送给博主的新邮件通知标题</span><span class="token key atrule">MAIL_SUBJECT</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>parent.nick<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>，您在博客『<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>site.name<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>』上的评论收到了回复 📨 <span class="token comment">#发送给评论者的邮件标题 </span><span class="token key atrule">MAIL_TEMPLATE</span><span class="token punctuation">:</span> <span class="token comment">#发送给评论者的邮件正文，我的模板如下</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border-top</span><span class="token punctuation">:</span>2px solid #12ADDB<span class="token punctuation">;</span><span class="token property">box-shadow</span><span class="token punctuation">:</span>0 1px 3px #AAAAAA<span class="token punctuation">;</span><span class="token property">line-height</span><span class="token punctuation">:</span>180%<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span>0 15px 12px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>50px auto<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>12px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border-bottom</span><span class="token punctuation">:</span>1px solid #DDD<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>14px<span class="token punctuation">;</span><span class="token property">font-weight</span><span class="token punctuation">:</span>normal<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span>13px 0 10px 8px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        您在博客<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> #12ADDB<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;site.url&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;site.name&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>上的评论有了新的回复💖    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>    &#123;&#123;parent.nick&#125;&#125;，您曾发表评论：    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">padding</span><span class="token punctuation">:</span>0 12px 0 12px<span class="token punctuation">;</span><span class="token property">margin-top</span><span class="token punctuation">:</span>18px</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> #f5f5f5<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 10px 15px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>18px 0<span class="token punctuation">;</span><span class="token property">word-wrap</span><span class="token punctuation">:</span>break-word<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>&#123;&#123;parent.comment | safe&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>&#123;&#123;self.nick&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>回复说：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> #f5f5f5<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 10px 15px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>18px 0<span class="token punctuation">;</span><span class="token property">word-wrap</span><span class="token punctuation">:</span>break-word<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>&#123;&#123;self.comment | safe&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>您可以点击<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span>#12addb</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;site.postUrl&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>查看回复的完整內容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>，欢迎再次光临<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span>#12addb</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;site.url&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;site.name&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border-top</span><span class="token punctuation">:</span>1px solid #DDD<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span>13px 0 0 8px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>该邮件为系统自动发送的邮件，请勿直接回复❌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210730112843.png" alt="环境变量添加示例"></p></li><li><p>重新部署waline服务。</p></li><li><p>邮箱收发效果图如下：</p><ul><li><p>博主方</p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210730145048.png" alt="" style="zoom: 33%;" /></li><li><p>评论方</p> <img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210730150250.png" alt="" style="zoom: 33%;" /></li><li><p>网页端</p>  <img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210730150516.png" alt="" style="zoom: 80%;" /></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 美化 </tag>
            
            <tag> website </tag>
            
            <tag> Waline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github 学生包申请</title>
      <link href="/posts/e5f80bd6/"/>
      <url>/posts/e5f80bd6/</url>
      
        <content type="html"><![CDATA[<p>注意：如不知道什么是Github学生包，请自行<a href="https://www.google.com/">Google</a>或者<a href="https://education.github.com/pack">点开此处进行查看</a>。</p><h2 id="前置材料"><a href="#前置材料" class="headerlink" title="前置材料"></a>前置材料</h2><ol><li><p>拥有Github账号一枚</p></li><li><p>年满13岁</p></li><li><p>学历证明、学生证等能证明为在读学生的资料</p></li><li><p>学生邮箱，能提高审核速度，非必须</p><blockquote><p>官网说明如下图所示：<br> <img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210726115610.png" alt="申请条件"></p></blockquote></li></ol><span id="more"></span><h2 id="申请步骤"><a href="#申请步骤" class="headerlink" title="申请步骤"></a>申请步骤</h2><ol><li>打开 <a href="https://education.github.com/discount_requests/student_application">申请网址</a> ,如浏览器没有登录 Github 会提示登录。登录完毕后，操作如下图所示：</li></ol><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210726115628.png" alt="申请界面"></p><ul><li>以上如果你选择的学生邮箱，会自动补齐学校名称，并且后续只需上传学历证明即可。如不是学生邮箱，后续填写资料相对较多。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210726115639.png" alt="学生邮箱选择"></p><ol start="2"><li>步骤一提交后，具体资料上传界面如下：</li></ol><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210726115648.png" alt="上传证明"></p><ol start="3"><li>提交证明资料后，你的申请邮箱会收到一封邮件，如果资料没问题，一般30天内会收到申请通过的通知邮件。</li></ol><h2 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h2><p>申请通过后，学生包内容访问此处:<a href="https://education.github.com/pack/offers">https://education.github.com/pack/offers</a>，进行查看使用，大致包含内容如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210726115705.png" alt="学生包内容"></p>]]></content>
      
      
      <categories>
          
          <category> Github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 白嫖 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo SEO 优化</title>
      <link href="/posts/Infinity/"/>
      <url>/posts/Infinity/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是SEO"><a href="#什么是SEO" class="headerlink" title="什么是SEO"></a>什么是SEO</h2><p>SEO（Search Engine Optimization）即搜索引擎优化，<a href="https://zh.wikipedia.org/wiki/%E6%90%9C%E5%B0%8B%E5%BC%95%E6%93%8E%E6%9C%80%E4%BD%B3%E5%8C%96">维基百科</a> 上给出的定义如下：</p><blockquote><p>搜索引擎优化是一种通过了解搜索引擎的运作规则来调整网站，以及提高目的网站在有关搜索引擎内排名的方式。</p></blockquote><span id="more"></span><h2 id="SEO-优化"><a href="#SEO-优化" class="headerlink" title="SEO 优化"></a>SEO 优化</h2><p>在谷歌或者百度的搜索链接中，使用以下格式可以直接搜索自己的域名， 如果能搜索到就说明已经被收录，反之则没有。可以直接搜索自己的域名，或者加一些关键词来更好地判断，例如：<code>site:https://yileaf.com</code></p><h2 id="站点地图"><a href="#站点地图" class="headerlink" title="站点地图"></a>站点地图</h2><p>作用：告诉搜索引擎你的网站结构等信息，让搜索引擎更智能抓取内容。</p><h3 id="Google"><a href="#Google" class="headerlink" title="Google"></a>Google</h3><h4 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h4><p>1.在博客根目录安装<a href="https://github.com/hexojs/hexo-generator-sitemap">hexo-generator-sitemap</a>插件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-sitemap --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.打开Hexo站点配置文件，添加如下配置：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Google sitemap</span><span class="token key atrule">sitemap</span><span class="token punctuation">:</span>    <span class="token key atrule">path</span><span class="token punctuation">:</span> seo/sitemap.xml <span class="token comment">#替换成你想存放的路径</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="向搜索引擎提交网站"><a href="#向搜索引擎提交网站" class="headerlink" title="向搜索引擎提交网站"></a>向搜索引擎提交网站</h4><p>1.前往地址：<a href="https://search.google.com/search-console/about?hl=zh-CN">Google Search Console</a>，登录谷歌账号。</p><p>2.添加网站：我这里选择采用网址前缀的方式</p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210723144500.png" alt="添加网址"></p><p>3.验证域名所有权</p><ul><li><p>谷歌搜索有多种验证方式，这里我选择谷歌的HTML标记法：</p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210723144918.png" alt="标记验证法"></p></li><li><p>Next 已提供了该验证方式,打开主题配置文件搜索<code>google_site_verification </code>,填入谷歌提供的<code>Content</code>内容。</p><p> <img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210723150134.png" alt="Next head 源码"></p><p> <img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210723145341.png" alt="配置Google验证码"></p></li><li><p>重新部署博客成功后，回到<a href="https://search.google.com/search-console/about?hl=zh-CN">Google Search Console</a>点击验证即可。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;</span> hexo g <span class="token operator">&amp;</span> hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210723152824.png" alt="绑定成功"></p></li></ul><p>4.绑定站点地图</p><ul><li><p>打开<a href="https://search.google.com/search-console/about?hl=zh-CN">Google Search Console</a> -选择已经验证过的站点，依次点击索引 → 站点地图，右上角「添加新的站点地图」，添加 <code>sitemap.xml</code> 的链接即可。若无报错则站点地图提交成功。</p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210723153709.png" alt="添加Google站点地图"></p></li></ul><h4 id="添加谷歌统计分析"><a href="#添加谷歌统计分析" class="headerlink" title="添加谷歌统计分析"></a>添加谷歌统计分析</h4><p>1.登录<a href="https://analytics.google.com/">Google Analytics</a>，根据提示添加一个新的媒体资源，最后会给你一个跟踪id。</p><p>2.复制该id，打开主题配置文件搜索<code>google_analytics</code>，配置id即可。</p><h4 id="添加robots-txt"><a href="#添加robots-txt" class="headerlink" title="添加robots.txt"></a>添加robots.txt</h4><p><code>robots.txt</code>（统一小写）是一种存放于网站根目录下的ASCII编码的文本文件，它的作用是告诉搜索引擎此网站中哪些内容是可以被爬取的，哪些是禁止爬取的。<br>在 <code>source</code> 目录下增加 <code>robots.txt</code> 文件，网站生成后在网站的根目录(<code>blog/public/</code>)下</p><pre class="line-numbers language-tex" data-language="tex"><code class="language-tex">User-agent: *Allow: &#x2F;Allow: &#x2F;posts&#x2F;Allow: &#x2F;overviews&#x2F;Allow: &#x2F;about&#x2F;Allow: &#x2F;links&#x2F;Disallow: &#x2F;js&#x2F;Disallow: &#x2F;css&#x2F;Disallow: &#x2F;lib&#x2F;Disallow: &#x2F;images&#x2F;Sitemap: https:&#x2F;&#x2F;你的域名&#x2F;sitemap.xmlSitemap: https:&#x2F;&#x2F;你的域名&#x2F;baidusitemap.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Allow 表示允许被访问的</li><li>Disallow 是不允许的意思。</li><li>后面两个 Sitemap 就是网站地图了。而网站地图前面说了是给爬虫用的。这里配置在 robots 中。</li></ul><h3 id="Baidu"><a href="#Baidu" class="headerlink" title="Baidu"></a>Baidu</h3><blockquote><p>百度这方面是真的 🌶️🐤 ，Say no to Baidu.</p></blockquote><p>百度站长平台sitemap提交是邀请制的，并没有对所有站长开放，只有网站到一定等级百度才会在你后台开放提交sitemap的入口。</p><p>登录<a href="https://ziyuan.baidu.com/site/siteadd">百度站长平台</a>进行网站验证，官方已有说明文档，和Google也类似，不过多赘述。</p><h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><ul><li>插件地址：<a href="https://github.com/coneycode/hexo-generator-baidu-sitemap">hexo-generator-baidu-sitemap</a></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-baidu-sitemap --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开站点配置文件添加如下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 百度站点地图</span><span class="token key atrule">baidusitemap</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> seo/baidusitemap.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="百度主动推送"><a href="#百度主动推送" class="headerlink" title="百度主动推送"></a>百度主动推送</h4><ul><li>插件地址：<a href="https://github.com/huiwang/hexo-baidu-url-submit">Hexo Baidu URL Submit</a></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-baidu-url-submit --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开站点配置文件添加如下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 百度主动推送</span><span class="token key atrule">baidu_url_submit</span><span class="token punctuation">:</span>  <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token number">5</span>      <span class="token comment"># 提交最新的五个链接</span>  <span class="token key atrule">host</span><span class="token punctuation">:</span> blog.yileaf.com  <span class="token comment"># 百度站长平台中注册的域名</span>  <span class="token key atrule">token</span><span class="token punctuation">:</span>                   <span class="token comment"># 秘钥</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> seo/baidu_urls.txt   <span class="token comment"># 文本文档的地址,新链接会保存在此文本文档里  </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>重新部署博客推送即可将站点链接一并推送至百度。</p><h4 id="添加百度统计分析"><a href="#添加百度统计分析" class="headerlink" title="添加百度统计分析"></a>添加百度统计分析</h4><p>1.登录<a href="https://tongji.baidu.com/">百度统计</a>后进入侧边栏<code>账户管理 -&gt; 网站列表</code>，点击右侧<code>新增网站</code>按钮添加你的网站。</p><p>2.添加<code>网站域名/网站首页</code>信息后，点击<code>确定</code>按钮，百度统计会提供一段<code>JS</code>脚本用于嵌入。</p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210723171357.png" alt="百度统计代码"></p><p>3.复制上图<code>hm.js?</code> 后面那串统计脚本 id，打开主题配置文件搜索<code>baidu_analytics</code>填写统计脚本id即可。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java 杂谈</title>
      <link href="/posts/3f8cfd13/"/>
      <url>/posts/3f8cfd13/</url>
      
        <content type="html"><![CDATA[<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><ul><li>除文章内容特殊说明外，版本皆推荐使用官方发行最新稳定版</li><li>文章内容仅供参考，不做任何保证</li><li><del>xxx</del> : 此标记为可跳过</li><li>如对本文有任何建议或提问皆可留言或联系本人</li><li>本文初始版本 1.0 → 目前 1.3</li></ul><span id="more"></span><h1 id="Java学习路线"><a href="#Java学习路线" class="headerlink" title="Java学习路线"></a>Java学习路线</h1><h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><ul><li><p>基本网络知识：TCP/IP HTTP/HTTPS</p></li><li><p>基本算法</p></li><li><p>基础API认知：Java SE API → <mark class="label success">JDK11</mark></p><table><thead><tr><th>概括</th><th>部分细节</th></tr></thead><tbody><tr><td>Java生态体系</td><td></td></tr><tr><td>Java程序的基本结构</td><td>对象、类、包、方法、引用….</td></tr><tr><td>Java的数据类型</td><td>类型转换、精度丢失….</td></tr><tr><td>Java的运算系统</td><td>各种运算符….</td></tr><tr><td>面向对象</td><td>封装、继承、多态….</td></tr><tr><td>Java的异常体系</td><td>合理处理异常</td></tr><tr><td>Java的IO体系</td><td>BIO、NIO、AIO、Stream…</td></tr><tr><td>多线程</td><td>线程同步、死锁、安全….</td></tr><tr><td>反射</td><td>动态代理….</td></tr><tr><td>Lambda</td><td>理解函数式编程</td></tr><tr><td>注解</td><td>理解注解的原理</td></tr></tbody></table></li><li><p>基本的设计模式</p></li><li><p><font color="red">单元测试必会</font>。好的项目测试代码少不了，如果你留意过Github上的顶级开源项目，那么你会发现它的测试代码和业务代码接近 1:1 。</p></li></ul><hr><h2 id="Java-Web-基础"><a href="#Java-Web-基础" class="headerlink" title="Java Web 基础"></a>Java Web 基础</h2><mark class="label info">请先选择一款喜欢的开发工具，并熟练使用 Debug</mark><ul><li><p><del>HTML5、CSS3、JavaScript</del></p></li><li><p>Java EE 规范</p></li><li><p>Servlet</p><table><thead><tr><th>知识点</th></tr></thead><tbody><tr><td>Request</td></tr><tr><td>Response</td></tr><tr><td>Cookie</td></tr><tr><td>Session</td></tr><tr><td>Filter</td></tr><tr><td>Listener</td></tr></tbody></table></li><li><p>Tomcat</p></li><li><p>浏览器调试网页。F12查看请求路径或者状态码等快速定位异常。</p></li></ul><hr><h2 id="工具方面"><a href="#工具方面" class="headerlink" title="工具方面"></a>工具方面</h2><ul><li>操作系统：Linux （CentOS\Ubuntu...）</li><li>代码管理：<del>SVN</del> / <font color="red">Git</font> → 必须熟练</li><li>持续集成 （CI/CD）：Jenkins</li><li>Java项目管理工具：Maven / Gradle</li><li>压力测试：Apache JMeter</li></ul><hr><h2 id="框架方面"><a href="#框架方面" class="headerlink" title="框架方面"></a>框架方面</h2><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><ul><li>SQL：MySQL / Oracle / Postgre SQL</li><li>NoSQL：Redis / MongoDB / Memcached / Elasticsearch</li></ul><blockquote><p>到此即可寻找开源项目配合框架分析学习，推荐练习题库 → <a href="https://github.com/hcsp">https://github.com/hcsp</a></p></blockquote><h3 id="应用层框架"><a href="#应用层框架" class="headerlink" title="应用层框架"></a>应用层框架</h3><ul><li><p><del>SSH: Spring + Struts + Hibernate</del></p></li><li><p>SSM: Spring + Spring mvc + MyBatis</p></li><li><p>Spring Boot</p><table><thead><tr><th>知识点</th><th>描述</th></tr></thead><tbody><tr><td>WebFlux</td><td>基于<a href="https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=en&sp=nmt4&u=https://www.reactive-streams.org/&usg=ALkJrhhHaqtXjNiAExlmWTzAxsuYRGV6Pw">Reactive Streams</a> API构建的<a href="https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=en&sp=nmt4&u=https://www.reactive-streams.org/&usg=ALkJrhhHaqtXjNiAExlmWTzAxsuYRGV6Pw">反应流</a> Web应用程序的支持</td></tr><tr><td>Security</td><td>安全处理</td></tr><tr><td>Jpa</td><td>数据操作</td></tr></tbody></table></li></ul><h3 id="各种中间件"><a href="#各种中间件" class="headerlink" title="各种中间件"></a>各种中间件</h3><ul><li><p>MQ 消息队列：RabbitMQ ….</p></li><li><p>通信框架：</p><ul><li><p>Dubbo </p></li><li><p>Spring Cloud</p><table><thead><tr><th>知识点</th><th>描述</th></tr></thead><tbody><tr><td>Eureka</td><td>服务注册中心</td></tr><tr><td>Feign</td><td>微服务之间调用</td></tr><tr><td>Gateway</td><td>网关</td></tr><tr><td>Hystrix</td><td>断路器</td></tr><tr><td>Ribbon</td><td>负载均衡</td></tr></tbody></table></li></ul></li><li><p>分布式事务：<a href="https://github.com/seata/seata">Seata</a></p></li><li><p><a href="https://github.com/apache/zookeeper">ZooKeeper</a> 服务注册中心</p></li><li><p><a href="https://www.elastic.co/cn">Elasticsearch</a>  数据库 搜索引擎</p></li><li><p><a href="https://github.com/xuxueli/xxl-job">xxl-job</a>：分布式可视化任务调度中心 </p></li></ul><hr><h2 id="虚拟化-容器化技术"><a href="#虚拟化-容器化技术" class="headerlink" title="虚拟化/容器化技术"></a>虚拟化/容器化技术</h2><ul><li>Docker：容器化</li><li>K8s：kubernetes</li><li>Web 容器：Tomcat、Jetty、Undertow、Netty</li></ul><h1 id="个人开发环境"><a href="#个人开发环境" class="headerlink" title="个人开发环境"></a>个人开发环境</h1><ul><li><p>IntelliJ IDEA  </p><table><thead><tr><th>插件名</th><th>概述</th></tr></thead><tbody><tr><td>Translation</td><td>翻译用</td></tr><tr><td>TabNine</td><td>代码提示</td></tr><tr><td>RestfulTool  (<del>RestfulToolkit</del>)</td><td>看接口</td></tr><tr><td><a href="https://github.com/gejun123456/MyBatisCodeHelper-Pro">MyBatisCodeHelper-Pro</a></td><td>MyBatis 辅助插件，用过的人都知道</td></tr><tr><td>MyBatis Log Plugin</td><td>看 MyBatis 运行产生的 Sql</td></tr><tr><td>JRebel</td><td>热加载</td></tr><tr><td>SonarLint</td><td>代码质量检查</td></tr><tr><td>Alibaba Java Coding Guidelines</td><td>检查编码规范</td></tr><tr><td>.ignore</td><td>Git 文件忽略</td></tr><tr><td>Maven Helper</td><td>排查 Maven 依赖冲突</td></tr><tr><td>Lombok</td><td>此处请自行Google</td></tr><tr><td>Background Image Plus</td><td>背景图片更换</td></tr></tbody></table><p>推荐教程 → <a href="https://github.com/judasn/IntelliJ-IDEA-Tutorial">IntelliJ IDEA 简体中文专题教程</a></p></li><li><p>Navicat Premium 15 ：数据库可视化操作客户端</p></li><li><p><a href="https://github.com/qishibo/AnotherRedisDesktopManager">Another.Redis.Desktop.Manager</a>：Redis 可视化操作客户端</p></li><li><p>Xshell + Xftp：官网自称业界最强大的SSH客户机</p></li><li><p>Postman：接口测试</p></li><li><p>常用第三方库：Hutool 、<a href="https://github.com/alibaba/fastjson">fastjson</a>、<a href="https://github.com/google/guava">Guava</a>、MyBatis-Plus</p></li></ul><h2 id="碎碎念念"><a href="#碎碎念念" class="headerlink" title="碎碎念念"></a>碎碎念念</h2><ul><li><font color="red">一定要注意编码规范，命名合理</font>，能一行代码搞定的事就不要写两行代码。接口必须写文档，注明需要什么参数返回什么参数。如果你使用的IDEA做到IDEA没有奇怪的颜色提示。</li><li>搜索引擎是个好东西，请善用。</li><li>遇到错误，首先看对应开发工具的日志，定位到具体异常发生处，使用Debug调试，一般而言都能解决，引用某个大佬说过的话：<del>瞎子不配学编程</del>。</li><li>试着阅读源码，也许并没有你想的那么难。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自动更新 Docker 镜像与容器</title>
      <link href="/posts/166bdcf1/"/>
      <url>/posts/166bdcf1/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在服务器上部署 Docker 容器有一种在手机上装 App 的感觉，但 Docker 容器并不会像手机 App 那样会自动更新，而如果我们需要更新容器一般需要以下四个步骤：</p><ul><li>停止容器：<code>docker stop &lt;CONTAINER&gt;</code></li><li>删除容器：<code>docker rm &lt;CONTAINER&gt;</code></li><li>更新镜像：<code>docker pull &lt;IMAGE&gt;</code></li><li>启动容器：<code>docker run &lt;ARG&gt; ... &lt;IMAGE&gt;</code></li></ul><p>停止容器这个步骤可以在删除容器时使用 <code>-f</code> 参数来代替，即使这样还是需要三个步骤。如果部署了大量的容器需要更新使用这种传统的方式工作量是巨大的。</p><p><a href="https://github.com/containrrr/watchtower">Watchtower</a> 是一个可以实现自动化更新 Docker 基础镜像与容器的实用工具。它监视正在运行的容器以及相关的镜像，当检测到 <code>reg­istry</code> 中的镜像与本地的镜像有差异时，它会拉取最新镜像并使用最初部署时相同的参数重新启动相应的容器，一切好像什么都没发生过，就像更新手机上的 App 一样。</p><span id="more"></span><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><p>Watch­tower 本身被打包为 Docker 镜像，因此可以像运行任何其他容器一样运行它：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d <span class="token punctuation">\</span>    --name watchtower <span class="token punctuation">\</span>    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>    containrrr/watchtower<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>然后所有容器都会自动更新，也包括 Watch­tower 本身。</p><h2 id="自动清除旧镜像"><a href="#自动清除旧镜像" class="headerlink" title="自动清除旧镜像"></a>自动清除旧镜像</h2><p>官方给出的默认启动命令在长期使用后会堆积非常多的标签为 <code>none</code> 的旧镜像，如果放任不管会占用大量的磁盘空间。要避免这种情况可以加入 <code>--cleanup</code> 选项，这样每次更新都会把旧的镜像清理掉。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d <span class="token punctuation">\</span>    --name watchtower <span class="token punctuation">\</span>    --restart unless-stopped <span class="token punctuation">\</span>    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>    containrrr/watchtower <span class="token punctuation">\</span>    --cleanup<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="选择性自动更新"><a href="#选择性自动更新" class="headerlink" title="选择性自动更新"></a>选择性自动更新</h2><p>某些容器可能需要稳定的运行，经常更新或重启可能会造成一些问题，这时我们可以使用一些参数来选择与控制容器的更新。</p><p>假设我们需要更新 <code>nginx</code>、<code>redis</code> 这两个容器，我们可以把容器名称追加到启动命令的最后面，就像下面这个例子:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d <span class="token punctuation">\</span>    --name watchtower <span class="token punctuation">\</span>    --restart unless-stopped <span class="token punctuation">\</span>    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>    containrrr/watchtower <span class="token punctuation">\</span>    --cleanup <span class="token punctuation">\</span>    nginx redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果您需要排除某些容器，可以将 <code>com.centurylinklabs.watchtower.enable</code> 这个 <code>la­bel</code> 设置为 <code>false</code>。即在 <code>docker run</code> 命令中加入 <code>--label=com.centurylinklabs.watchtower.enable=false</code> 参数。在下面这个例子中，除了 <code>nginx</code>、<code>redis</code> 以外的容器都会自动更新：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d <span class="token punctuation">\</span>    --name watchtower <span class="token punctuation">\</span>    --restart unless-stopped <span class="token punctuation">\</span>    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>    --label<span class="token operator">=</span>com.centurylinklabs.watchtower.enable<span class="token operator">=</span>false <span class="token punctuation">\</span>    containrrr/watchtower <span class="token punctuation">\</span>    --cleanup <span class="token punctuation">\</span>    nginx redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="设置自动更新频率"><a href="#设置自动更新频率" class="headerlink" title="设置自动更新频率"></a>设置自动更新频率</h2><p>默认情况下 Watch­tower 每 5 分钟会轮询一次，如果你觉得这个频率太高了可以使用如下选项来控制更新的频率：</p><ul><li><p><code>--interval</code>, <code>-i</code> - 设置间隔更新时间。默认 300 秒（ 5 分钟）</p></li><li><p><code>--schedule</code>, <code>-s</code> - 设置定时更新时间。格式为 <a href="https://github.com/containrrr/watchtower/issues/87">Cron 表达式</a>  ，比如<code>--schedule &quot;0 0 4 * * *&quot;</code>，参数对照表如下：</p><table><thead><tr><th>Field name</th><th>Mandatory?</th><th>Allowed values</th><th>Allowed special characters</th></tr></thead><tbody><tr><td>Seconds</td><td>Yes</td><td>0-59</td><td>* / , -</td></tr><tr><td>Minutes</td><td>Yes</td><td>0-59</td><td>* / , -</td></tr><tr><td>Hours</td><td>Yes</td><td>0-23</td><td>* / , -</td></tr><tr><td>Day of month</td><td>Yes</td><td>1-31</td><td>* / , - ?</td></tr><tr><td>Month</td><td>Yes</td><td>1-12 or JAN-DEC</td><td>* / , -</td></tr><tr><td>Day of week</td><td>Yes</td><td>0-6 or SUN-SAT</td><td>* / , - ?</td></tr></tbody></table></li></ul><p>比如每小时检查一次更新：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d <span class="token punctuation">\</span>    --name watchtower <span class="token punctuation">\</span>    --restart unless-stopped <span class="token punctuation">\</span>    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>    containrrr/watchtower <span class="token punctuation">\</span>    --cleanup <span class="token punctuation">\</span>    -i <span class="token number">3600</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="手动更新"><a href="#手动更新" class="headerlink" title="手动更新"></a>手动更新</h2><p>前面的使用方式都是让 Watch­tower 以 <code>detached</code>（后台）模式在运行并自动更新容器，而 Watch­tower 也支持以 <code>foreground</code>（前台）模式来使用，即运行一次退出并删掉容器，来实现手动更新容器。这对于偶尔更新一次那些在自动更新中被排除的容器非常有用。</p><p>对于 <code>foreground</code> 模式，需要加上 <code>--run-once</code> 这个专用的选项。下面的例子 Docker 会运行一次 Watch­tower 并检查 <code>redis</code> 容器的基础镜像更新，最后删掉本次运行创建的 Watch­tower 容器。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run --rm <span class="token punctuation">\</span>    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>    containrrr/watchtower <span class="token punctuation">\</span>    --cleanup <span class="token punctuation">\</span>    --run-once <span class="token punctuation">\</span>    redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>同样的手动更新你也可以排除某些容器，更新其它的容器：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run --rm <span class="token punctuation">\</span>    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>    --label<span class="token operator">=</span>com.centurylinklabs.watchtower.enable<span class="token operator">=</span>false <span class="token punctuation">\</span>    containrrr/watchtower <span class="token punctuation">\</span>    --cleanup <span class="token punctuation">\</span>    --run-once <span class="token punctuation">\</span>    redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="案例演示"><a href="#案例演示" class="headerlink" title="案例演示"></a>案例演示</h2><p>每周凌晨1点自动检测<code>nondanee/unblockneteasemusic</code>镜像启动的<code>unmusic</code>容器，并自动更新</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d <span class="token punctuation">\</span>    --name watchtower <span class="token punctuation">\</span>    --restart unless-stopped <span class="token punctuation">\</span>    -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>    containrrr/watchtower <span class="token punctuation">\</span>    --cleanup <span class="token punctuation">\</span>    -s <span class="token string">"0 0 1 * * 0"</span> <span class="token punctuation">\</span>    unmusic<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>更新前：</p><p><img src="https://s2.ax1x.com/2020/02/12/1buBes.png" alt="更新前"></p><p>更新后：</p><p><img src="https://s2.ax1x.com/2020/02/12/1bKZ0s.png" alt="更新后"></p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><ul><li>启动命令 <code>-v</code> 参数绑定的目录不能修改，watchtower 需要与 docker 进行通信。关于 <code>/var/run/docker.sock</code> 的作用可<a href="https://medium.com/better-programming/about-var-run-docker-sock-3bfd276e12fd">点击此处进行查看</a>。</li><li>设定的更新名为 <code>NAMES</code> 列容器名，非镜像名。</li><li>更多功能，如电子邮件通知、监视私人注册表的镜像、更新远程主机上的容器等，请访问 <a href="https://containrrr.github.io/watchtower/">Watchtower 官方文档</a> 进行查阅。</li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>原文作者：P3TERX</li><li>原文链接 → <a href="https://p3terx.com/archives/docker-watchtower.html">https://p3terx.com/archives/docker-watchtower.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 搬运 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 集成 Valine 评论系统</title>
      <link href="/posts/74e90fd6/"/>
      <url>/posts/74e90fd6/</url>
      
        <content type="html"><![CDATA[<h2 id="第一步：注册Leancloud，获取-AppID-和-AppKey"><a href="#第一步：注册Leancloud，获取-AppID-和-AppKey" class="headerlink" title="第一步：注册Leancloud，获取 AppID 和 AppKey"></a>第一步：注册Leancloud，获取 AppID 和 AppKey</h2><p>推荐使用国际版，点击进入<a href="https://leancloud.app/">国际版Leancloud官网</a></p><span id="more"></span><ol><li>注册完成后需先创建应用。单击创建应用，如下图：</li></ol><p><img src="https://s2.ax1x.com/2020/01/28/1Kb1xS.png" alt="创建应用"></p><ol start="2"><li>创建完成后，打开应用，点击左边的存储，查看是否有<code>Comment</code>和 <code>Counter</code>，如没有则创建，权限设为所有用户。创建完成后，如下图：</li></ol><p><img src="https://s2.ax1x.com/2020/01/28/1KbdP0.png" alt="创建class"></p><blockquote><p>Comment库：用于存放网站评论 ，Counter库：用于存放文章阅读量。</p><p>如没有创建，那么在显示 post 页面时，请求 LeanCloud 的 api 接口，可能会返回 error code=101</p></blockquote><ol start="3"><li>点击设置 → 安全中心 ,将除了数据存储的服务全部关闭，并绑定web安全域名，防止恶意调用。</li></ol><p><img src="https://s2.ax1x.com/2020/01/28/1KbrMF.png" alt="安全设置"></p><ol start="4"><li>最后点击应用 Keys，获取到<code>AppID</code>和<code>Appkey</code>。</li></ol><h2 id="第二步：在Hexo-Next主题中配置"><a href="#第二步：在Hexo-Next主题中配置" class="headerlink" title="第二步：在Hexo Next主题中配置"></a>第二步：在Hexo Next主题中配置</h2><ol><li>打开 <a href="https://www.jsdelivr.com/package/npm/valine">https://www.jsdelivr.com/package/npm/valine</a> 获取最新的 <code>valine.min.js</code> cdn地址：</li></ol><p><a href="https://imgchr.com/i/1Kbose"><img src="https://s2.ax1x.com/2020/01/28/1Kbose.md.png" alt="获取valine地址"></a></p><ol start="2"><li>找到主题配置文件，搜索<code>valine</code>，添加cdn链接，大致位置如下图：</li></ol><p><img src="https://s2.ax1x.com/2020/01/28/1KqSsg.png" alt="添加cdn"></p><ol start="3"><li>还是主题配置文件中，填写<code>appid</code>和<code>appkey</code>等<code>valine</code>参数(语言必须小写)：</li></ol><p><img src="https://s2.ax1x.com/2020/02/06/1yaQHS.png" alt="参数配置"></p><h2 id="第三步：测试valine评论"><a href="#第三步：测试valine评论" class="headerlink" title="第三步：测试valine评论"></a>第三步：测试valine评论</h2><p>在本地博客根目录执行<code>hexo clean &amp;&amp; hexo s --debug</code>重启博客后，浏览器访问任意文章进行留言如下图：</p><p><img src="https://s2.ax1x.com/2020/01/28/1KqIf0.png" alt="输入界面"></p><p><img src="https://s2.ax1x.com/2020/01/28/1KLk0H.png" alt="测试成功"></p><blockquote><p>感兴趣的可以<a href="https://valine.js.org/avatar.html">点击此处查看</a>如何设置头像</p></blockquote><p>评论的数据存在leancloud应用中，如下图：</p><p><img src="https://s2.ax1x.com/2020/01/28/1KLYhq.png" alt="数据"></p><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>在 Hexo 博客中，评论功能在所有页面都默认开启，但某些页面不需要显示评论功能，例如分类，标记页面我们并不需要评论功能。</p><p>解决办法：在 <code>Front-matter</code> 中通过<code>comments</code>属性设置<code>true</code>或<code>false</code>控制该页面或者是文章的评论功能是否打开，如下：</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span><span class="token font-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> Tags<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2019-12-19 16:10:19</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"tags"</span> <span class="token key atrule">comments</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span><span class="token punctuation">---</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 美化 </tag>
            
            <tag> Valine </tag>
            
            <tag> website </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Navicat Premium 15 激活</title>
      <link href="/posts/9925702b/"/>
      <url>/posts/9925702b/</url>
      
        <content type="html"><![CDATA[<blockquote><p>实测适配目前官网最新15.0.19版</p></blockquote><h3 id="下载安装-Navicat"><a href="#下载安装-Navicat" class="headerlink" title="下载安装 Navicat"></a>下载安装 Navicat</h3><ul><li><p><a href="https://www.navicat.com.cn/download/navicat-premium">官网下载地址</a></p></li><li><p>请自行安装软件</p></li></ul><span id="more"></span>    <h3 id="下载注册工具"><a href="#下载注册工具" class="headerlink" title="下载注册工具"></a>下载注册工具</h3><ul><li>蓝奏云下载地址：<a href="https://lanzous.com/icro89a">https://lanzous.com/icro89a</a></li><li>这里特别感谢工具作者Paolo：<del><a href="https://github.com/Deltafox79/Navicat_Keygen">项目GitHub地址</a></del></li></ul><h3 id="激活教程"><a href="#激活教程" class="headerlink" title="激活教程"></a>激活教程</h3><ol><li>打开注册工具（最好以管理员的方式运行）</li></ol><p><img src="https://s1.ax1x.com/2020/05/18/YfxHmR.png" alt="主界面"></p><ol start="2"><li>点击右上角的patch，选择到你安装路径的navicat.exe，点击确定（打开），提示 <code>navicat.exe - x64 -&gt; Cracked</code>。</li></ol><p><img src="https://s2.ax1x.com/2020/01/16/ljGSDH.png" alt="找到安装路径"></p><p><img src="https://s2.ax1x.com/2020/01/16/ljGE28.png" alt="替换"></p><ol start="3"><li>选择你自己安装的语言版本，修改你的名字和组织，然后点击生成。</li></ol><p><img src="https://s2.ax1x.com/2020/01/16/ljGDG6.png" alt="生成key"></p><ol start="4"><li>把生成的key输入到Navicat许可密钥里面去进行注册，这一步有可能会提示秘钥不对。如果不对，在注册机重新生成一个即可。</li></ol><p><img src="https://s2.ax1x.com/2020/01/16/ljJZJx.png" alt="点击注册"></p><p><img src="https://s2.ax1x.com/2020/01/16/ljJKyD.png" alt="填入生成的key"></p><ol start="5"><li>点击激活，选择手动激活。</li></ol><p><img src="https://s2.ax1x.com/2020/01/16/ljJBwj.png" alt="手动激活"></p><ol start="6"><li>把请求码复制到注册机里面去，点击右下角的生成。</li><li>生成之后，Navicat会自动同步生成之后的激活码，再次点击激活。</li></ol><p><img src="https://s2.ax1x.com/2020/01/16/ljJgpV.png" alt="替换激活码"></p><p><img src="https://s2.ax1x.com/2020/01/16/ljJbp6.png" alt="提示激活成功"></p><ol start="8"><li>激活效果</li></ol><p><img src="https://s3.ax1x.com/2020/11/12/BxMqsS.png" alt="永久许可"></p><p><img src="https://s3.ax1x.com/2020/11/12/BxQ8dH.png" alt="版本显示"></p><blockquote><p>如果要更新Navicat，重新打开软件会提示激活失效，重新使用注册机激活即可。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Navicat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 白嫖 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 集成 Gitalk 评论系统</title>
      <link href="/posts/4657b735/"/>
      <url>/posts/4657b735/</url>
      
        <content type="html"><![CDATA[<h3 id="Gitalk是什么"><a href="#Gitalk是什么" class="headerlink" title="Gitalk是什么"></a>Gitalk是什么</h3><p>Gitalk 利用了 <a href="https://developer.github.com/v3/">GithubAPI</a> 基于 GitHub Issue 和 Preact 开发的评论插件，官方网址： <a href="https://gitalk.github.io/">https://gitalk.github.io</a></p><h3 id="Gitalk特性"><a href="#Gitalk特性" class="headerlink" title="Gitalk特性"></a>Gitalk特性</h3><ul><li>使用 GitHub 登录</li><li>支持多语言 [en, zh-CN, zh-TW, es-ES, fr, ru]</li><li>支持个人或组织</li><li>无干扰模式（设置 distractionFreeMode 为 true 开启）</li><li>快捷键提交评论 （cmd|ctrl + enter）</li></ul><span id="more"></span>    <h3 id="配置Gitalk"><a href="#配置Gitalk" class="headerlink" title="配置Gitalk"></a>配置Gitalk</h3><p>1、要使用 Gitalk 需要先在 GitHub 上注册新应用，链接：<a href="https://github.com/settings/applications/new">https</a> : <a href="https://github.com/settings/applications/new">//github.com/settings/applications/new</a></p><p><img src="https://s2.ax1x.com/2020/01/04/l0YZ5R.png" alt="OAuth Apps"></p><p>2、点击注册后，页面大致如下，其中<code>Client ID</code>和<code>Client Secret</code>在后面的配置中需要用到，也是应用访问你 Github 的凭证，到时复制粘贴即可：</p><p><img src="https://s2.ax1x.com/2020/01/04/l0YURP.png" alt="连接密匙"></p><p>3、Next 主题 v7.6.0 中已经默认集成了gitalk，只需在<code>\themes\next\_config.yml</code>锁定gitalk配置开启使用：</p><p><img src="https://s2.ax1x.com/2020/01/04/l0YodJ.png" alt="gitalk"></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">gitalk</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment">#启用gitalk</span>  <span class="token key atrule">github_id</span><span class="token punctuation">:</span>   <span class="token comment">#github帐号 例：CodeHaotian</span>  <span class="token key atrule">id</span><span class="token punctuation">:</span> location.pathname  <span class="token comment">#此设置参照下文常见问题说明</span>  <span class="token key atrule">repo</span><span class="token punctuation">:</span>   <span class="token comment">#存放评论的仓库名称</span>  <span class="token key atrule">client_id</span><span class="token punctuation">:</span>   <span class="token comment">#application的id，即上文Client ID</span>  <span class="token key atrule">client_secret</span><span class="token punctuation">:</span>  <span class="token comment">#application的密码，即上文Client Secret</span>  <span class="token key atrule">admin_user</span><span class="token punctuation">:</span>  <span class="token comment">#页面显示联系**初始化评论 例：CodeHaotian</span>  <span class="token key atrule">distraction_free_mode</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Facebook-like distraction free mode</span>  <span class="token comment"># Gitalk's display language depends on user's browser or system environment</span>  <span class="token comment"># If you want everyone visiting your site to see a uniform language, you can set a force language value</span>  <span class="token comment"># Available values: en | es-ES | fr | ru | zh-CN | zh-TW</span>  <span class="token key atrule">language</span><span class="token punctuation">:</span> zh<span class="token punctuation">-</span>CN<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>4、重新部署博客，打开页面进入某一博客内容下，评论会出现在页面最下方。</p><h3 id="常见问题说明"><a href="#常见问题说明" class="headerlink" title="常见问题说明"></a>常见问题说明</h3><p>1、未找到相关的issue进行评论，请联系@XXX初始化创建</p><p><img src="https://s2.ax1x.com/2020/01/04/l0Y0sS.png" alt="初始化"></p><ul><li>解决办法：出现这总情况是因为博主未给文章评论初始化，博主只需要登录 GitHub 账户即可。</li></ul><p>2、浏览器进入开发者模式，看见类似<a href="https://api.github.com/user">https://api.github.com/user</a> 401 (Unauthorized)</p><ul><li>解决办法：找到主题配置文件， 在 gitalk 配置里添加 <code>id: location.pathname</code></li></ul><p>3、Error: Not Found.</p><p><img src="https://s2.ax1x.com/2020/01/04/l0tRkd.png" alt="Error: Not Found"></p><ul><li>解决办法：未能正确找到仓库 repo，检查一下你的仓库是否配置正确。</li></ul><blockquote><p>文章具体为 Hexo Next v7.6.0 环境下集成 Gitalk</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 美化 </tag>
            
            <tag> Gitalk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo-NexT 后续优化</title>
      <link href="/posts/15baca53/"/>
      <url>/posts/15baca53/</url>
      
        <content type="html"><![CDATA[<div class="note info"><h2 id="网页title添加搞怪特效"><a href="#网页title添加搞怪特效" class="headerlink" title="网页title添加搞怪特效"></a>网页title添加搞怪特效</h2></div><p>在<code>blog\source\js</code>文件夹下创建<code>funny_title.js</code>，添加如下代码：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/* 离开当前页面时修改网页标题，回到当前页面时恢复原来标题 */</span>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> OriginTitle <span class="token operator">=</span> document<span class="token punctuation">.</span>title<span class="token punctuation">;</span>  <span class="token keyword">let</span> titleTime<span class="token punctuation">;</span>  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'visibilitychange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>hidden<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'╭(°A°`)╮ 页面崩溃啦 ~'</span><span class="token punctuation">;</span>      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>titleTime<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// $('[rel="icon"]').attr('href', "/images/favicon-32x32.png"); 替换网站icon图标(可选)</span>      document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'(ฅ>ω&lt;*ฅ) 噫又好了鸭~'</span> <span class="token operator">+</span> OriginTitle<span class="token punctuation">;</span>      titleTime <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        document<span class="token punctuation">.</span>title <span class="token operator">=</span> OriginTitle<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><span id="more"></span><p>在<code>head.njk</code>文件中，添加引用：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 搞怪欺骗 <span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"/js/funny_title.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div class="note info"><h2 id="侧边栏添加近期文章"><a href="#侧边栏添加近期文章" class="headerlink" title="侧边栏添加近期文章"></a>侧边栏添加近期文章</h2></div><p>1.打开<code>blog\source\_data\sidebar.njk</code>文件，加入以下代码：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token punctuation">&#123;</span><span class="token operator">%</span> <span class="token keyword">if</span> theme<span class="token punctuation">.</span>recent_posts<span class="token punctuation">.</span>enable <span class="token operator">%</span><span class="token punctuation">&#125;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"links-of-blogroll"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"links-of-blogroll-title"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 选择合适的icon <span class="token operator">--</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token keyword">if</span> theme<span class="token punctuation">.</span>recent_posts<span class="token punctuation">.</span>icon <span class="token operator">%</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"&#123;&#123; theme.recent_posts.icon &#125;&#125;"</span> aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token operator">%</span><span class="token operator">-</span> endif <span class="token operator">%</span><span class="token punctuation">&#125;</span>        <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> theme<span class="token punctuation">.</span>recent_posts<span class="token punctuation">.</span>description <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"links-of-blogroll-list"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文章排序规格<span class="token punctuation">,</span><span class="token operator">-</span>updated 按照文章更新时间倒排 <span class="token operator">--</span><span class="token operator">></span>        <span class="token punctuation">&#123;</span><span class="token operator">%</span> <span class="token keyword">set</span> posts <span class="token operator">=</span> site<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'-updated'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token punctuation">&#125;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 显示四条近期文章 <span class="token operator">--</span><span class="token operator">></span>        <span class="token punctuation">&#123;</span><span class="token operator">%</span> <span class="token keyword">for</span> post <span class="token keyword">in</span> posts<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token punctuation">&#125;</span>          <span class="token operator">&lt;</span>li<span class="token operator">></span>            <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"&#123;&#123; url_for(post.path) &#125;&#125;"</span> title<span class="token operator">=</span><span class="token string">"&#123;&#123; post.title &#125;&#125;"</span> target<span class="token operator">=</span><span class="token string">"_blank"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> post<span class="token punctuation">.</span>title <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>        <span class="token punctuation">&#123;</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">&#125;</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.打开主题配置文件，在最后添加如下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 近期文章配置  </span><span class="token key atrule">recent_posts</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>history  <span class="token key atrule">description</span><span class="token punctuation">:</span> 近期文章<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>重启博客效果如下：</p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210720175939.png" alt="近期文章默认效果"></p><blockquote><p>有点low，开始美化</p></blockquote><p>3.1.打开主题配置文件，搜索<code>social_icons</code>选项，进行如下修改：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">social_icons</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 显示社交图标</span>  <span class="token key atrule">icons_only</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 只显示社交图标</span>  <span class="token key atrule">transition</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 过渡动画</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>3.2.打开 <code>blog\source\_data\variables.styl</code> 定义颜色：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token variable-declaration"><span class="token variable">$recent-articles-link</span>     <span class="token operator">=</span> <span class="token hexcode">#428bca</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>3.3.打开<code>blog\source\_data\styles.styl</code>文件，加入如下样式：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.links-of-blogroll-title</span> <span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-large<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.links-of-blogroll-list a</span> <span class="token punctuation">&#123;</span>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>  <span class="token selector">&amp;:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> $recent-articles-link<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid $recent-articles-link<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>优化后效果如下：</p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210721110116.png" alt="近期文章效果改"></p><div class="note info"><h2 id="首页文章折叠"><a href="#首页文章折叠" class="headerlink" title="首页文章折叠"></a>首页文章折叠</h2></div><p>这里通过文章模板进行实现：</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span><span class="token font-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> Hexo美化<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2019-12-19</span><span class="token key atrule">categories</span><span class="token punctuation">:</span><span class="token punctuation">-</span> Hexo<span class="token key atrule">tags</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> study</span><span class="token punctuation">---</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/img/haha.png<span class="token punctuation">"</span></span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>900<span class="token punctuation">"</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>600<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>git<span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>center</span> <span class="token punctuation">/></span></span>摘要内容......<span class="token comment">&lt;!-- more --></span>以下为隐藏内容<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="note info"><h2 id="点击小爱心特效"><a href="#点击小爱心特效" class="headerlink" title="点击小爱心特效"></a>点击小爱心特效</h2></div><p>1.在<code>blog\source\js</code>下新建<code>click-love.js</code>，接着把如下代码拷贝粘贴到<code>click-love.js</code>文件中。</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">function</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token string">".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> e<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>e<span class="token operator">&lt;</span>d<span class="token punctuation">.</span>length<span class="token punctuation">;</span>e<span class="token operator">++</span><span class="token punctuation">)</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>alpha<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token operator">?</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">--</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>scale<span class="token operator">+=</span><span class="token number">.004</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>alpha<span class="token operator">-=</span><span class="token number">.013</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token operator">=</span><span class="token string">"left:"</span><span class="token operator">+</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token operator">+</span><span class="token string">"px;top:"</span><span class="token operator">+</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">+</span><span class="token string">"px;opacity:"</span><span class="token operator">+</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>alpha<span class="token operator">+</span><span class="token string">";transform:scale("</span><span class="token operator">+</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>scale<span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>scale<span class="token operator">+</span><span class="token string">") rotate(45deg);background:"</span><span class="token operator">+</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>color<span class="token operator">+</span><span class="token string">";z-index:99999"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> t<span class="token operator">=</span><span class="token string">"function"</span><span class="token operator">==</span><span class="token keyword">typeof</span> e<span class="token punctuation">.</span>onclick<span class="token operator">&amp;&amp;</span>e<span class="token punctuation">.</span>onclick<span class="token punctuation">;</span>e<span class="token punctuation">.</span><span class="token function-variable function">onclick</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>t<span class="token operator">&amp;&amp;</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">i</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> a<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>a<span class="token punctuation">.</span>className<span class="token operator">=</span><span class="token string">"heart"</span><span class="token punctuation">,</span>d<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span>a<span class="token punctuation">,</span>x<span class="token operator">:</span>e<span class="token punctuation">.</span>clientX<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span>y<span class="token operator">:</span>e<span class="token punctuation">.</span>clientY<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span>scale<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>alpha<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">var</span> a<span class="token operator">=</span>t<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>a<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">"text/css"</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">&#123;</span>a<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>a<span class="token punctuation">.</span>styleSheet<span class="token punctuation">.</span>cssText<span class="token operator">=</span>e<span class="token punctuation">&#125;</span>t<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span><span class="token string">"rgb("</span><span class="token operator">+</span><span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token operator">~</span><span class="token operator">~</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> d<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>e<span class="token punctuation">.</span><span class="token function-variable function">requestAnimationFrame</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> e<span class="token punctuation">.</span>requestAnimationFrame<span class="token operator">||</span>e<span class="token punctuation">.</span>webkitRequestAnimationFrame<span class="token operator">||</span>e<span class="token punctuation">.</span>mozRequestAnimationFrame<span class="token operator">||</span>e<span class="token punctuation">.</span>oRequestAnimationFrame<span class="token operator">||</span>e<span class="token punctuation">.</span>msRequestAnimationFrame<span class="token operator">||</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token number">1e3</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>如没有 js 目录直接新建一个即可，这里只是为了后期统一进行管理。</p></blockquote><p>2.在 <code>blog\source\_data\body-end.njk</code> 文件中加入如下代码：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token punctuation">&#123;</span>##########################<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>### <span class="token constant">PAGE</span> <span class="token constant">CLICK</span> <span class="token constant">EFFECTS</span> ###<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>##########################<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token operator">%</span> <span class="token keyword">if</span> theme<span class="token punctuation">.</span>click_love<span class="token punctuation">.</span>enable <span class="token operator">%</span><span class="token punctuation">&#125;</span>    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"/js/click-love.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>body-end.njk</code> 文件需要在主题配置文件的 <code>custom_file_path</code> 选项中取消注释</p></blockquote><p>3.在主题配置文件（一般是最后一行）启用配置：</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment"># 页面点击爱心特效</span><span class="token key atrule">click_love</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div class="note info"><h2 id="添加动态背景"><a href="#添加动态背景" class="headerlink" title="添加动态背景"></a>添加动态背景</h2></div><p>找到 <code>body-end.njk</code> 文件，加入以下内容：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bg_content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canvas<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>&#123;% if theme.canvas %&#125;   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/dynamic_bg.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>&#123;% endif %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code>blog\source\js</code>中新建文件<code>dynamic_bg.js</code>，代码链接中可见：<a href="https://github.com/moyuhs/moyuhs.github.io/blob/HexoNexT/source/js/dynamic_bg.js">dynamic_bg.js</a></p><p>在 <code>styles.styl</code> 文件末尾添加如下内容：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.bg_content</span> <span class="token punctuation">&#123;</span>  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在主题配置文件中添加<code>canvas: true</code>启用刚才的配置。</p><div class="note info"><h2 id="添加图片灯箱"><a href="#添加图片灯箱" class="headerlink" title="添加图片灯箱"></a>添加图片灯箱</h2></div><p>灯箱功能，实现点击图片后放大聚焦图片，并支持幻灯片播放、全屏播放、缩略图、快速分享到社交媒体等，该功能由 <a href="https://github.com/fancyapps/fancybox">fancyBox</a> 提供。</p><p>在主题配置文件中搜索 <code>fancybox</code>设置为<code>true</code>。</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># FancyBox is a tool that offers a nice and elegant way to add zooming functionality for images.</span><span class="token comment"># For more information: https://fancyapps.com/fancybox</span><span class="token key atrule">fancybox</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div class="note info"><h2 id="开启不蒜子访问统计"><a href="#开启不蒜子访问统计" class="headerlink" title="开启不蒜子访问统计"></a>开启不蒜子访问统计</h2></div><p>在主题配置文件中，开启配置：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">busuanzi_count</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 开启不蒜子访问统计，默认是false</span>  <span class="token key atrule">total_visitors</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 站点总访问量</span>  <span class="token key atrule">total_visitors_icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>user <span class="token comment"># icon皆为对应图标</span>  <span class="token key atrule">total_views</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 所有页面的总浏览量</span>  <span class="token key atrule">total_views_icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>eye  <span class="token key atrule">post_views</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 文章浏览量</span>  <span class="token key atrule">post_views_icon</span><span class="token punctuation">:</span> far fa<span class="token punctuation">-</span>eye<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>默认效果只有图标，不是特别直观，打开<code>styles.styl</code>文件添加如下代码：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* footer-不蒜子统计 */</span><span class="token selector">.busuanzi-count .post-meta-item:nth-child(1)</span> <span class="token punctuation">&#123;</span>  <span class="token selector">&amp;::before</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'访客数'</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">&amp;::after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'人次'</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">.busuanzi-count .post-meta-item:nth-child(2)</span> <span class="token punctuation">&#123;</span>  <span class="token selector">&amp; .post-meta-item-icon::before</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'总访问量'</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">&amp;::after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'次'</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最终效果：</p><p><img src="https://s2.ax1x.com/2020/01/28/1KSYnK.png" alt="底部效果"></p><div class="note info"><h2 id="页脚增加网站运行时间统计"><a href="#页脚增加网站运行时间统计" class="headerlink" title="页脚增加网站运行时间统计"></a>页脚增加网站运行时间统计</h2></div><p>1.在<code>footer.njk</code>文件中加入以下代码：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"website-time"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"&#123;&#123; 'website-time-dynamic' if theme.website_running_time.style == 'dynamic' else 'website-time-static' &#125;&#125;"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.在<code>body-end.njk</code>文件中加入以下代码：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token punctuation">&#123;</span>############################<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>### <span class="token constant">WEBSITE</span> <span class="token constant">RUNNING</span> <span class="token constant">TIME</span> ###<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>############################<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token operator">%</span> <span class="token keyword">if</span> theme<span class="token punctuation">.</span>website_running_time<span class="token punctuation">.</span>enable <span class="token operator">%</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> id<span class="token operator">=</span><span class="token string">"website-js"</span> src<span class="token operator">=</span><span class="token string">"/js/website.min.js"</span> code<span class="token operator">=</span><span class="token string">"all"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.在<code>blog\source\js</code>下新建<code>website.js</code>加入倒计时：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">siteTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function">siteTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> seconds <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> minutes <span class="token operator">=</span> seconds <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> hours <span class="token operator">=</span> minutes <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> days <span class="token operator">=</span> hours <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> years <span class="token operator">=</span> days <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> todayYear <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> todayMonth <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> todayDate <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> todayHour <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> todayMinute <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> todaySecond <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)    year - 作为date对象的年份，为4位年份值    month - 0-11之间的整数，做为date对象的月份    day - 1-31之间的整数，做为date对象的天数    hours - 0(午夜24点)-23之间的整数，做为date对象的小时数    minutes - 0-59之间的整数，做为date对象的分钟数    seconds - 0-59之间的整数，做为date对象的秒数    microseconds - 0-999之间的整数，做为date对象的毫秒数 */</span>    <span class="token keyword">const</span> t1 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//建站时间</span>    <span class="token keyword">const</span> t2 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span>todayYear<span class="token punctuation">,</span> todayMonth<span class="token punctuation">,</span> todayDate<span class="token punctuation">,</span> todayHour<span class="token punctuation">,</span> todayMinute<span class="token punctuation">,</span> todaySecond<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> diff <span class="token operator">=</span> t2 <span class="token operator">-</span> t1<span class="token punctuation">;</span>    <span class="token keyword">const</span> diffYears <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> years<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> diffDays <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> days<span class="token punctuation">)</span> <span class="token operator">-</span> diffYears <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> diffHours <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days<span class="token punctuation">)</span> <span class="token operator">/</span> hours<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> diffMinutes <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days <span class="token operator">-</span> diffHours <span class="token operator">*</span> hours<span class="token punctuation">)</span> <span class="token operator">/</span> minutes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> diffSeconds <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">-</span> <span class="token punctuation">(</span>diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">+</span> diffDays<span class="token punctuation">)</span> <span class="token operator">*</span> days <span class="token operator">-</span> diffHours <span class="token operator">*</span> hours <span class="token operator">-</span> diffMinutes <span class="token operator">*</span> minutes<span class="token punctuation">)</span> <span class="token operator">/</span> seconds<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#website-time'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">" Run for "</span> <span class="token operator">+</span> diffYears <span class="token operator">+</span> <span class="token string">" Year "</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">" Days "</span> <span class="token operator">+</span> diffHours <span class="token operator">+</span> <span class="token string">" Hours "</span> <span class="token operator">+</span> diffMinutes <span class="token operator">+</span> <span class="token string">" m "</span> <span class="token operator">+</span> diffSeconds <span class="token operator">+</span> <span class="token string">" s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>siteTime<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>4.在<code>styles.styl</code>文件中给倒计时添加样式：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.website-time-static</span> <span class="token punctuation">&#123;</span>  <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>  <span class="token property">-webkit-background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-webkit-linear-gradient</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> #aa4b6b<span class="token punctuation">,</span> #6b6b83<span class="token punctuation">,</span> #3b8d99<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.website-time-dynamic</span> <span class="token punctuation">&#123;</span>  <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>  <span class="token property">background-size</span><span class="token punctuation">:</span> 300% 100%<span class="token punctuation">;</span>  <span class="token property">-webkit-background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>  <span class="token property">animation</span><span class="token punctuation">:</span> general-animation 36s infinite linear<span class="token punctuation">;</span>  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #077dcc 0%<span class="token punctuation">,</span> #f47920 10%<span class="token punctuation">,</span> #d71345 20%<span class="token punctuation">,</span> #ff2a2a 30%<span class="token punctuation">,</span> #7e36ff 40%<span class="token punctuation">,</span> #077dcc 50%<span class="token punctuation">,</span> #f47920 60%<span class="token punctuation">,</span> #d71345 70%<span class="token punctuation">,</span> #f7acbc 80%<span class="token punctuation">,</span> #ffd400 90%<span class="token punctuation">,</span> #077dcc 100%<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5.在主题配置文件中启用配置</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 网站运行时间</span><span class="token key atrule">website_running_time</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># 默认 static 可选 dynamic</span>  <span class="token key atrule">style</span><span class="token punctuation">:</span> dynamic<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div class="note info"><h2 id="Hexo新建文章时自动打开编辑器"><a href="#Hexo新建文章时自动打开编辑器" class="headerlink" title="Hexo新建文章时自动打开编辑器"></a>Hexo新建文章时自动打开编辑器</h2></div><p>首先在Hexo目录下的scripts目录中创建一个JavaScript脚本文件。<br>如果没有这个scripts目录，则新建一个。<br>scripts目录新建的JavaScript脚本文件可以任意取名。<br>通过这个脚本，我们用其来监听hexo new这个动作，并在检测到hexo new之后，执行编辑器打开的命令。</p><p>如果你是windows平台的Hexo用户，则将下列内容写入你的脚本：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> spawn <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exec<span class="token punctuation">;</span>hexo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'new'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token string">'start  "markdown编辑器绝对路径.exe" '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>如果你是Mac平台的Hexo用户，则将下列内容写入你的脚本：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> exec <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exec<span class="token punctuation">;</span>hexo<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'new'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'open -a "markdown编辑器绝对路径.app" '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="文章加密"><a href="#文章加密" class="headerlink" title="文章加密"></a>文章加密</h2><p>使用插件：<a href="https://github.com/MikeCoder/hexo-blog-encrypt">hexo-blog-encrypt</a></p><p>1.在博客根目录执行安装命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-blog-encrypt --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.在站点配置文件中加入以下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Security</span><span class="token key atrule">encrypt</span><span class="token punctuation">:</span>  <span class="token key atrule">abstract</span><span class="token punctuation">:</span> 本文章已加密🐇<span class="token punctuation">,</span> 请输入密码查看.  <span class="token key atrule">message</span><span class="token punctuation">:</span> ( ⓛ ω ⓛ <span class="token important">*)</span><span class="token punctuation">,</span> 请在此处输入密码，查看加密内容.  <span class="token key atrule">wrong_pass_message</span><span class="token punctuation">:</span> 抱歉<span class="token punctuation">,</span> 这个密码看着不太对<span class="token punctuation">,</span> 请再试试.  <span class="token key atrule">wrong_hash_message</span><span class="token punctuation">:</span> 抱歉<span class="token punctuation">,</span> 这个文章不能被校验<span class="token punctuation">,</span> 不过您还是能看看解密后的内容. <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.在需要加密的文章<code>Front-matter</code>里加入<code>password: 访问密码</code>即可。</p><blockquote><p>已知问题，解密后初次访问文章，极小部分布局错乱，代码块复制功能失效。刷新页面都可解决。更多高阶用法自行查阅官方文档。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 建站</title>
      <link href="/posts/8613f919/"/>
      <url>/posts/8613f919/</url>
      
        <content type="html"><![CDATA[<h2 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h2><p>安装Hexo相当简单，只需要先安装下列应用程序即可：</p><ul><li><a href="http://nodejs.org/">Node.js</a> (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)</li><li><a href="http://git-scm.com/">Git</a></li></ul><h2 id="搭建-Hexo"><a href="#搭建-Hexo" class="headerlink" title="搭建 Hexo"></a>搭建 Hexo</h2><p>在命令行中通过npm来安装Hexo：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -g hexo-cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>-g</code>  表示全局安装，会将Hexo命令加入环境变量中，以使其在cmd下有效。</li></ul><p>新建博客目录blog，然后在该路径下执行初始化命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>执行完毕后，将会生成以下文件结构：</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">├── node_modules       //依赖安装目录├── scaffolds          //模板文件夹，新建的文章将会从此目录下的文件中继承格式|   ├── draft.md       //草稿模板|   ├── page.md        //页面模板|   └── post.md        //文章模板├── source             //资源文件夹，用于放置图片、数据、文章等资源|   └── _posts         //文章目录├── themes             //主题文件夹├── .gitignore         //指定不纳入git版本控制的文件├── _config.yml        //站点配置文件          ├── package.json       //应用程序的信息└── package-lock.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在根目录下执行如下命令启动 hexo 的内置 Web 服务器</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo g <span class="token comment"># 生成</span>hexo s <span class="token comment"># 启动服务</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>打开浏览器访问 <code>http://localhost:4000</code> 即可看到内容。</p><span id="more"></span><h2 id="安装-Next-主题"><a href="#安装-Next-主题" class="headerlink" title="安装 Next 主题"></a>安装 Next 主题</h2><blockquote><p>此教程博客根目录皆为blog，站点配置文件皆为blog/_config.yml</p></blockquote><p>在博客根目录下执行以下命令下载主题文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/next-theme/hexo-theme-next.git themes/next<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开站点配置文件，搜索  <code>theme</code>  字段的值修改为  <code>next</code>。</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">theme</span><span class="token punctuation">:</span> next<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>清除缓存并重启服务，刷新浏览器查看默认效果如下图：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;</span> hexo s --debug<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210611102418.png" alt="Next默认效果"></p><blockquote><blockquote><p>主题管理参考此文章 → <a href="https://wylu.github.io/posts/6f2f62d0/">主题版本管理</a></p></blockquote></blockquote><h2 id="自定义配置"><a href="#自定义配置" class="headerlink" title="自定义配置"></a>自定义配置</h2><p>自从 NexT-7.3.0 开始，官方推荐使用自定义配置文件，这样我们可以在不修改主题源码的同时完成选项配置、自定义布局、自定义样式，便于后续 NexT 版本更新。</p><h3 id="外挂主题配置"><a href="#外挂主题配置" class="headerlink" title="外挂主题配置"></a>外挂主题配置</h3><ul><li>在博客根目录执行以下命令，复制主题配置文件，此后修改 <code>_config.next.yml</code> 中相关参数即可。官方文档 → <a href="https://theme-next.js.org/docs/getting-started/configuration.html">点击访问</a></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> themes/next/_config.yml _config.next.yml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="外挂语言配置"><a href="#外挂语言配置" class="headerlink" title="外挂语言配置"></a>外挂语言配置</h3><p>我们原来是通过修改主题目录下的  <code>languages</code>  目录中的  <code>zh-CN.yml</code>  文件来对菜单等进行中文翻译的，现在我们可以通过在  <code>blog/source/_data/</code>  下新建数据文件  <code>languages.yml</code>，修改翻译配置如下：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">zh-CN</span><span class="token punctuation">:</span>    <span class="token key atrule">menu</span><span class="token punctuation">:</span>      <span class="token key atrule">home</span><span class="token punctuation">:</span> 博客首页      <span class="token key atrule">overviews</span><span class="token punctuation">:</span> 文章总览      <span class="token key atrule">timeline</span><span class="token punctuation">:</span> 时间轴      <span class="token key atrule">about</span><span class="token punctuation">:</span> 关于本站      <span class="token key atrule">links</span><span class="token punctuation">:</span> 友链链接      <span class="token key atrule">search</span><span class="token punctuation">:</span> 全站搜索    <span class="token key atrule">counter</span><span class="token punctuation">:</span>      <span class="token key atrule">tag_cloud</span><span class="token punctuation">:</span>        <span class="token key atrule">one</span><span class="token punctuation">:</span> &lt;i class="fas fa<span class="token punctuation">-</span>fw fa<span class="token punctuation">-</span>tags"<span class="token punctuation">></span>&lt;/i<span class="token punctuation">></span> 目前共计 1 个标签        <span class="token key atrule">other</span><span class="token punctuation">:</span> &lt;i class="fas fa<span class="token punctuation">-</span>fw fa<span class="token punctuation">-</span>tags"<span class="token punctuation">></span>&lt;/i<span class="token punctuation">></span> 目前共计 %d 个标签      <span class="token key atrule">categories</span><span class="token punctuation">:</span>        <span class="token key atrule">one</span><span class="token punctuation">:</span> &lt;i class="fas fa<span class="token punctuation">-</span>fw fa<span class="token punctuation">-</span>th"<span class="token punctuation">></span>&lt;/i<span class="token punctuation">></span> 目前共计 1 个分类        <span class="token key atrule">other</span><span class="token punctuation">:</span> &lt;i class="fas fa<span class="token punctuation">-</span>fw fa<span class="token punctuation">-</span>th"<span class="token punctuation">></span>&lt;/i<span class="token punctuation">></span> 目前共计 %d 个分类<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="外挂其他配置"><a href="#外挂其他配置" class="headerlink" title="外挂其他配置"></a><a href="https://theme-next.js.org/docs/advanced-settings/custom-files.html">外挂其他配置</a></h3><p>在主题配置文件中搜索  <code>custom_file_path</code>  选项，下方即为支持外挂数据文件，按照对应命名在  <code>blog/source/_data/</code> 目录下新建对应名称文件。并取消相应文件的注释即可。文件大致说明如下：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">custom_file_path</span><span class="token punctuation">:</span>  <span class="token key atrule">head</span><span class="token punctuation">:</span> source/_data/head.njk <span class="token comment">#网站顶部配置</span>  <span class="token comment">#header: source/_data/header.njk</span>  <span class="token key atrule">sidebar</span><span class="token punctuation">:</span> source/_data/sidebar.njk <span class="token comment">#侧边栏配置</span>  <span class="token key atrule">postMeta</span><span class="token punctuation">:</span> source/_data/post<span class="token punctuation">-</span>meta.njk <span class="token comment">#文章顶部配置对应themes\next\layout\_macro\post.njk文件，只要属性标签相同会覆盖主题默认</span>  <span class="token key atrule">postBodyEnd</span><span class="token punctuation">:</span> source/_data/post<span class="token punctuation">-</span>body<span class="token punctuation">-</span>end.njk <span class="token comment">#文章结束配置</span>  <span class="token key atrule">footer</span><span class="token punctuation">:</span> source/_data/footer.njk <span class="token comment">#底部配置</span>  <span class="token key atrule">bodyEnd</span><span class="token punctuation">:</span> source/_data/body<span class="token punctuation">-</span>end.njk <span class="token comment">#网站结束配置</span>  <span class="token key atrule">variable</span><span class="token punctuation">:</span> source/_data/variables.styl <span class="token comment">#变量定义文件</span>  <span class="token comment">#mixin: source/_data/mixins.styl</span>  <span class="token key atrule">style</span><span class="token punctuation">:</span> source/_data/styles.styl <span class="token comment"># 样式文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="配置站点"><a href="#配置站点" class="headerlink" title="配置站点"></a>配置站点</h2><h3 id="完善网站基本信息"><a href="#完善网站基本信息" class="headerlink" title="完善网站基本信息"></a>完善网站基本信息</h3><p>打开站点配置文件，完善网站基本信息：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Site 站点信息</span><span class="token key atrule">title</span><span class="token punctuation">:</span> 且听风吟 <span class="token comment"># 站点名称</span><span class="token key atrule">subtitle</span><span class="token punctuation">:</span> 🕊️ gu~gu~gu <span class="token comment"># 站点副标题</span><span class="token key atrule">description</span><span class="token punctuation">:</span> 一瞥便是惊鸿 芳华乱了浮生 <span class="token comment"># 站点描述</span><span class="token key atrule">keywords</span><span class="token punctuation">:</span> Java<span class="token punctuation">,</span>Web <span class="token comment"># 关键字</span><span class="token key atrule">author</span><span class="token punctuation">:</span> 浮生 <span class="token comment"># 作者名称</span><span class="token key atrule">language</span><span class="token punctuation">:</span> zh<span class="token punctuation">-</span>CN <span class="token comment"># 网站语言</span><span class="token key atrule">timezone</span><span class="token punctuation">:</span> <span class="token string">''</span> <span class="token comment"># 时区</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="配置网址url"><a href="#配置网址url" class="headerlink" title="配置网址url"></a>配置网址url</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//blog.yileaf.com <span class="token comment"># 配置为你的域名</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="添加404页面"><a href="#添加404页面" class="headerlink" title="添加404页面"></a>添加404页面</h3><p>在 <code>blog/source</code>目录下新建404.html，编写该页面，当线上访问不存在的路径时会自动重定向到该页面。附上我的页面效果：</p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210720171933.png" alt="404"></p><ul><li>网页源码链接 → <a href="https://github.com/moyuhs/moyuhs.github.io/blob/HexoNexT/source/404.html">点击访问源码存档</a> ，页面参考：<a href="https://dlzhang.com/">@lei2rock</a></li></ul><h3 id="配置站点目录"><a href="#配置站点目录" class="headerlink" title="配置站点目录"></a>配置站点目录</h3><p>如果你在<code>next</code>中自定义了菜单目录，此处需要修改为对应路径</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">source_dir</span><span class="token punctuation">:</span> source <span class="token comment"># 资源文件夹</span><span class="token key atrule">public_dir</span><span class="token punctuation">:</span> public <span class="token comment"># 公共文件夹</span><span class="token key atrule">tag_dir</span><span class="token punctuation">:</span> overviews/tags <span class="token comment"># 标签文件夹</span><span class="token key atrule">archive_dir</span><span class="token punctuation">:</span> overviews/timeline <span class="token comment"># 归档文件夹</span><span class="token key atrule">category_dir</span><span class="token punctuation">:</span> overviews <span class="token comment"># 分类文件夹</span><span class="token key atrule">code_dir</span><span class="token punctuation">:</span> downloads/code <span class="token key atrule">i18n_dir</span><span class="token punctuation">:</span> <span class="token punctuation">:</span>lang <span class="token comment"># 国际化</span><span class="token key atrule">skip_render</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> 404.html <span class="token comment"># 跳过指定文件的渲染。匹配到的文件将会被不做改动地复制到 public 目录中</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>更多站点配置内容移步 →  <a href="https://hexo.io/zh-cn/docs/configuration">Hexo文档</a> 进行查看</p></blockquote><h2 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h2><blockquote><p>下文修改主题配置，皆为修改  <code>_config.next.yml</code>  中的选项</p></blockquote><h3 id="主题风格修改"><a href="#主题风格修改" class="headerlink" title="主题风格修改"></a>主题风格修改</h3><p>Next 默认主题风格为 Muse，用户可以在主题配置文件中修改  <code>scheme</code>  字段以选择自己喜欢的主题风格：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Schemes</span><span class="token comment">#scheme: Muse</span><span class="token punctuation">...</span><span class="token punctuation">...</span><span class="token key atrule">scheme</span><span class="token punctuation">:</span> Gemini<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="修改网站-Favicon"><a href="#修改网站-Favicon" class="headerlink" title="修改网站 Favicon"></a>修改网站 Favicon</h3><p>Favicon 即浏览器标签左侧的图标。下载自己喜欢的图标置于  <code>blog\source\images\</code>  目录下，命名方式参考主题配置文件中的  <code>favicon</code>  字段。</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">favicon</span><span class="token punctuation">:</span>  <span class="token key atrule">small</span><span class="token punctuation">:</span> /images/favicon<span class="token punctuation">-</span>16x16.png <span class="token comment"># 小图标</span>  <span class="token key atrule">medium</span><span class="token punctuation">:</span> /images/favicon<span class="token punctuation">-</span>32x32.png <span class="token comment"># 大图标</span>  <span class="token key atrule">apple_touch_icon</span><span class="token punctuation">:</span> /images/apple<span class="token punctuation">-</span>touch<span class="token punctuation">-</span>icon<span class="token punctuation">-</span>next.png <span class="token comment"># 苹果图标</span>  <span class="token key atrule">safari_pinned_tab</span><span class="token punctuation">:</span> /images/favicon<span class="token punctuation">-</span>48x48.png <span class="token comment"># safari浏览器标签页图标</span>  <span class="token comment">#android_manifest: /images/manifest.json</span>  <span class="token comment">#ms_browserconfig: /images/browserconfig.xml</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h3><p>将头像放在  <code>blog/source/images</code>  路径下。打开主题配置文件，搜索  <code>avatar</code>  字段进行修改：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Sidebar Avatar</span><span class="token key atrule">avatar</span><span class="token punctuation">:</span>  <span class="token key atrule">url</span><span class="token punctuation">:</span> images/avatar.png <span class="token comment"># 头像路径</span>  <span class="token key atrule">rounded</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 使用圆形头像</span>  <span class="token key atrule">rotated</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 开启头像旋转</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="配置菜单"><a href="#配置菜单" class="headerlink" title="配置菜单"></a>配置菜单</h3><p>菜单配置项的格式为  <code>key: /link/ || icon</code>，包含三个部分，第一是菜单项的名称，第二是菜单项的链接，第三是菜单项对应的图标。</p><ul><li>key：菜单项显示的名称（如 <code>home</code>，<code>archives</code> 等），Hexo 首先会根据 key 在 languages 文件夹找对应语言的翻译，如果找到则会加载该翻译，如果找不到，将使用 key 本身的值。其中 key 的值大小写敏感。</li><li>link：是你网站内相对网址的目标链接。</li><li>icon：FontAwesome 图标的名称。NexT 使用的是 <a href="https://fontawesome.com/icons">Font Awesome</a> 提供的图标， Font Awesome 提供了 600+ 的图标，可以满足绝大的多数的场景。</li></ul><p>打开主题配置文件，搜索  <code>menu</code>  选项，进行相应配置：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">menu</span><span class="token punctuation">:</span>  <span class="token key atrule">home</span><span class="token punctuation">:</span> / <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>home  <span class="token key atrule">overviews</span><span class="token punctuation">:</span>    <span class="token key atrule">default</span><span class="token punctuation">:</span> /overviews/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>archive    <span class="token key atrule">tags</span><span class="token punctuation">:</span> tags/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>tags    <span class="token key atrule">timeline</span><span class="token punctuation">:</span> timeline/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>stream  <span class="token key atrule">about</span><span class="token punctuation">:</span> /about/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>location<span class="token punctuation">-</span>arrow      <span class="token key atrule">links</span><span class="token punctuation">:</span> /links/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>link    <span class="token comment">#archives: /archives/ || fas fa-archive</span>  <span class="token punctuation">...</span><span class="token punctuation">...</span><span class="token key atrule">menu_settings</span><span class="token punctuation">:</span>  <span class="token key atrule">icons</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 显示菜单图标</span>  <span class="token key atrule">badges</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># 显示数量统计</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>开启对应菜单后，需在  <code>blog/source</code> 下新建对应分类文件夹，并添加  <code>index.md</code></li></ul><h3 id="添加社交链接"><a href="#添加社交链接" class="headerlink" title="添加社交链接"></a>添加社交链接</h3><p>打开主题配置文件，搜索  <code>social</code>  选项，进行对应更改：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">social</span><span class="token punctuation">:</span>  <span class="token key atrule">简书</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.jianshu.com/u/ec346a4e0d4e <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>heartbeat  <span class="token key atrule">GitHub</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/moyuhs <span class="token punctuation">|</span><span class="token punctuation">|</span> fab fa<span class="token punctuation">-</span>github  <span class="token key atrule">Telegram</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//t.me/yileaf <span class="token punctuation">|</span><span class="token punctuation">|</span> fab fa<span class="token punctuation">-</span>telegram  <span class="token key atrule">E-Mail</span><span class="token punctuation">:</span> mailto<span class="token punctuation">:</span>2056423011@qq.com <span class="token punctuation">|</span><span class="token punctuation">|</span> fas fa<span class="token punctuation">-</span>envelope<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="侧边栏美化"><a href="#侧边栏美化" class="headerlink" title="侧边栏美化"></a>侧边栏美化</h3><p>1.在 <code>variables.styl</code> 文件中定义字体格式：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token comment">// Font families.</span><span class="token variable-declaration"><span class="token variable">$font-family-custom</span>       <span class="token operator">=</span> cursive<span class="token punctuation">,</span> <span class="token string">"Helvetica Neue"</span><span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> <span class="token string">"PingFang SC"</span><span class="token punctuation">,</span> <span class="token string">"Hiragino Sans GB"</span><span class="token punctuation">,</span> <span class="token string">"Heiti SC"</span><span class="token punctuation">,</span> <span class="token string">"Microsoft YaHei"</span><span class="token punctuation">,</span> <span class="token string">"WenQuanYi Micro Hei"</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>2.在 <code>styles.styl</code> 文件中修改样式：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token selector"><span class="token comment">/* sidebar-网站拥有者 */</span>.site-author-name <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-larger<span class="token punctuation">;</span></span>  <span class="token property-declaration"><span class="token property">font-family</span><span class="token punctuation">:</span> $font-family-custom<span class="token punctuation">;</span></span><span class="token punctuation">&#125;</span><span class="token selector"><span class="token comment">/* sidebar-网站描述 */</span>.site-description <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium<span class="token punctuation">;</span></span>  <span class="token property-declaration"><span class="token property">font-family</span><span class="token punctuation">:</span> $font-family-custom<span class="token punctuation">;</span></span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="加载进度条"><a href="#加载进度条" class="headerlink" title="加载进度条"></a>加载进度条</h3><p>打开主题配置文件，搜索  <code>nprogress</code>  选项：</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">nprogress</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">spinner</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="网站圆角"><a href="#网站圆角" class="headerlink" title="网站圆角"></a>网站圆角</h3><p>1.在 <code>variables.styl</code> 文件中定义圆角大小：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token variable-declaration"><span class="token variable">$custom-radius</span>           <span class="token operator">=</span> <span class="token number">8</span><span class="token unit">px</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.在 <code>styles.styl</code> 文件中加定义圆角样式，效果如下图：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token selector"><span class="token comment">/* 圆角 */</span>.header-inner<span class="token punctuation">,</span> <span class="token comment">///顶部圆角</span>.sidebar-inner <span class="token punctuation">&#123;</span></span> <span class="token selector"><span class="token comment">//侧边头像圆角</span></span>  <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> $custom-radius<span class="token punctuation">;</span></span><span class="token punctuation">&#125;</span><span class="token selector">.site-brand-container <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> $custom-radius $custom-radius <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">;</span></span>  +<span class="token func"><span class="token function">mobile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></span>    <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> $custom-radius $custom-radius<span class="token punctuation">;</span></span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector"><span class="token comment">/* sidebar-二级菜单圆角 */</span>.sub-menu <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> $custom-radius <span class="token important">!important</span><span class="token punctuation">;</span></span><span class="token punctuation">&#125;</span><span class="token selector"><span class="token comment">/* post-文章卡片圆角 */</span>.post-block<span class="token punctuation">,</span>.post-block + .post-block <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">border-radius</span><span class="token punctuation">:</span> $custom-radius <span class="token important">!important</span><span class="token punctuation">;</span></span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210714112014.png" alt="网站圆角效果"></p><h3 id="文章置顶"><a href="#文章置顶" class="headerlink" title="文章置顶"></a>文章置顶</h3><p>1.在需要置顶的文章 <code>Front-matter</code> 中添加 <code>sticky: n</code>，这里的n是数字要求&gt;0，数字越大表示置顶等级越高，文章越靠前，例：</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token coord">---</span>title: xxxdate: xxxcategories:<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> - xx</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">sticky: 1</span></span><span class="token coord">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210712173931.png" alt="置顶样式"></p><p>2.置顶图标动态颜色（根据个人喜欢）</p><p>在 <code>styles.styl</code> 文件中加入以下代码：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token selector"><span class="token comment">/* post-文章置顶 */</span>.post-sticky-flag <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> <span class="token color">transparent</span><span class="token punctuation">;</span></span>  <span class="token property-declaration"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token func"><span class="token function">linear-gradient</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token unit">deg</span><span class="token punctuation">,</span> <span class="token hexcode">#333333</span> <span class="token number">0</span><span class="token unit">%</span><span class="token punctuation">,</span> <span class="token hexcode">#CC0033</span> <span class="token number">33.3</span><span class="token unit">%</span><span class="token punctuation">,</span> <span class="token hexcode">#FF0033</span> <span class="token number">66.6</span><span class="token unit">%</span><span class="token punctuation">,</span> <span class="token hexcode">#333333</span> <span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>  <span class="token property-declaration"><span class="token property">background-size</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token unit">%</span> <span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token comment">/*扩大背景区域*/</span></span>  <span class="token property-declaration"><span class="token property">-webkit-background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span> <span class="token comment">/*截取背景区域为文字*/</span></span>  <span class="token property-declaration"><span class="token property">animation</span><span class="token punctuation">:</span> thumbtack <span class="token number">4</span><span class="token unit">s</span> infinite linear<span class="token punctuation">;</span></span><span class="token punctuation">&#125;</span><span class="token atrule-declaration"><span class="token atrule">@keyframes</span> thumbtack <span class="token punctuation">&#123;</span></span>  <span class="token selector">0% <span class="token punctuation">&#123;</span></span>    <span class="token property-declaration"><span class="token property">background-position</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">;</span></span>  <span class="token punctuation">&#125;</span>  <span class="token selector">100% <span class="token punctuation">&#123;</span></span>    <span class="token property-declaration"><span class="token property">background-position</span><span class="token punctuation">:</span> <span class="token number">-150</span><span class="token unit">%</span> <span class="token number">0</span><span class="token punctuation">;</span></span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="修改文内链接样式"><a href="#修改文内链接样式" class="headerlink" title="修改文内链接样式"></a>修改文内链接样式</h3><p>未修改时，文内链接颜色和普通文本没有区别：</p><p><img src="https://s2.ax1x.com/2019/12/24/lCB73n.png" alt="初始样式"></p><p>在 <code>variables.styl</code> 文件中加入以下代码：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token comment">// Color</span><span class="token variable-declaration"><span class="token variable">$custom-link</span>          <span class="token operator">=</span> <span class="token hexcode">#0593d3</span><span class="token punctuation">;</span></span><span class="token variable-declaration"><span class="token variable">$custom-link-hover</span>    <span class="token operator">=</span> <span class="token hexcode">#fc6423</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>在 <code>styles.styl</code> 文件中加入以下代码，效果如下图：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token selector"><span class="token comment">/* post-超链接 */</span>.post-body li a<span class="token punctuation">,</span>.post-body p a <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $custom-link<span class="token punctuation">;</span></span>  <span class="token property-declaration"><span class="token property">border-bottom</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid $custom-link<span class="token punctuation">;</span></span>  <span class="token selector">&amp;:hover <span class="token punctuation">&#123;</span></span>    <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $custom-link-hover<span class="token punctuation">;</span></span>    <span class="token property-declaration"><span class="token property">border-bottom</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid $custom-link-hover<span class="token punctuation">;</span></span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://s2.ax1x.com/2019/12/24/lCDCg1.png" alt="改后样式"></p><h3 id="中英文之间自动空格"><a href="#中英文之间自动空格" class="headerlink" title="中英文之间自动空格"></a>中英文之间自动空格</h3><p>该功能由 <a href="https://github.com/vinta/pangu.js">pangu</a> 提供，在主题配置文件中设置 <code>pangu: true</code> 即可启用该动能。</p><h3 id="配置页面代码块"><a href="#配置页面代码块" class="headerlink" title="配置页面代码块"></a>配置页面代码块</h3><p>在站点配置文件中选择 <code>prismjs</code> 或者 <code>highlight</code> 用于代码块高亮。</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">highlight</span><span class="token punctuation">:</span>   <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 关闭highlight</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">auto_detect</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span>  <span class="token key atrule">wrap</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">hljs</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">prismjs</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 启用prismjs</span>  <span class="token key atrule">preprocess</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在主题配置文件中，搜索  <code>codeblock</code> ,配置喜欢的主题，开启代码块复制。</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">codeblock</span><span class="token punctuation">:</span>  <span class="token comment"># 在线代码块高亮调试网站: https://theme-next.js.org/highlight/</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token comment">#对应highlight</span>    <span class="token key atrule">light</span><span class="token punctuation">:</span> default    <span class="token key atrule">dark</span><span class="token punctuation">:</span> tomorrow<span class="token punctuation">-</span>night  <span class="token key atrule">prism</span><span class="token punctuation">:</span> <span class="token comment">#对应prismjs</span>    <span class="token key atrule">light</span><span class="token punctuation">:</span> prism     <span class="token key atrule">dark</span><span class="token punctuation">:</span> prism<span class="token punctuation">-</span>dark  <span class="token key atrule">copy_button</span><span class="token punctuation">:</span>    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 启用代码块复制</span>    <span class="token comment"># Available values: default | flat | mac</span>    <span class="token key atrule">style</span><span class="token punctuation">:</span> <span class="token comment">#风格</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="回到顶部按钮显示百分比"><a href="#回到顶部按钮显示百分比" class="headerlink" title="回到顶部按钮显示百分比"></a>回到顶部按钮显示百分比</h3><p>在主题配置文件中，搜索  <code>back2top</code>  选项，进行如下更改：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">back2top</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 显示回到顶部按钮</span>  <span class="token key atrule">sidebar</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># true，按钮显示在侧边栏；false，按钮显示在右下角</span>  <span class="token key atrule">scrollpercent</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 按钮上显示百分比</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="添加文章结束语"><a href="#添加文章结束语" class="headerlink" title="添加文章结束语"></a>添加文章结束语</h3><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210705165124.png" alt="结束语效果图"></p><p>在  <code>post-body-end.njk</code>  文件中加入如下配置：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token punctuation">&#123;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token keyword">if</span> theme<span class="token punctuation">.</span>complimentary_close<span class="token punctuation">.</span>enable <span class="token operator">%</span><span class="token punctuation">&#125;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"complimentary-close"</span><span class="token operator">></span>    <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> 本文结束    <span class="token punctuation">&#123;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token keyword">if</span> theme<span class="token punctuation">.</span>complimentary_close<span class="token punctuation">.</span>icon <span class="token operator">%</span><span class="token punctuation">&#125;</span>        <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"&#123;&#123;theme.complimentary_close.icon&#125;&#125;"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span>    <span class="token punctuation">&#123;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token keyword">else</span> <span class="token operator">%</span><span class="token punctuation">&#125;</span>        <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fas fa-paw"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span>    <span class="token punctuation">&#123;</span><span class="token operator">%</span><span class="token operator">-</span> endif <span class="token operator">%</span><span class="token punctuation">&#125;</span>    感谢您的阅读 <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token operator">%</span><span class="token operator">-</span> endif <span class="token operator">%</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在 <code>styles.styl</code> 文件中加入如下样式：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* post-结束语 */</span><span class="token selector">.complimentary-close</span> <span class="token punctuation">&#123;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> $grey-light<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-largest<span class="token punctuation">;</span>  <span class="token property">letter-spacing</span><span class="token punctuation">:</span> $font-spacing<span class="token punctuation">;</span>  <span class="token selector">+mobile()</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> $font-size-medium<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在 <code>variables.styl</code> 文件中加入如下配置：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token comment">// font</span><span class="token variable-declaration"><span class="token variable">$font-spacing</span>         <span class="token operator">=</span> <span class="token number">0.2</span><span class="token unit">em</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>回到主题配置文件中，启用配置：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 文章结束语配置</span><span class="token key atrule">complimentary_close</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">icon</span><span class="token punctuation">:</span>  <span class="token comment"># 图标默认fas fa-paw</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="开启文章打赏"><a href="#开启文章打赏" class="headerlink" title="开启文章打赏"></a>开启文章打赏</h3><p>在主题配置文件中搜索 <code>reward</code> 选项，配置打赏选项：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">reward_settings</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 设置为true,每篇文章都将开启打赏功能</span>  <span class="token key atrule">animation</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 是否开启动画</span>  <span class="token key atrule">comment</span><span class="token punctuation">:</span> Buy me a coffee <span class="token comment"># 打赏文案</span><span class="token key atrule">reward</span><span class="token punctuation">:</span>  <span class="token key atrule">wechatpay</span><span class="token punctuation">:</span> /images/wechatpay.png <span class="token comment"># 微信二维码路径</span>  <span class="token key atrule">alipay</span><span class="token punctuation">:</span> /images/alipay.png  <span class="token comment"># 支付宝二维码路径</span>  <span class="token comment">#paypal: /images/paypal.png</span>  <span class="token comment">#bitcoin: /images/bitcoin.png</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>打开 <code>\themes\next\layout\_partials\post\post-reward.njk</code> 文件找到如下位置，添加爱心图标：</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span>button<span class="token operator">></span>    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fas fa-hand-holding-heart"</span> style<span class="token operator">=</span><span class="token string">"color:red;"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span> #加入爱心图标    <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string">'reward.donate'</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>如果开启全局打赏，可在不需要打赏的文章 <code>Front-matter</code> 中进行关闭：</p><pre class="line-numbers language-diff" data-language="diff"><code class="language-diff"><span class="token coord">---</span>title: xxxdate: xxxcategories:<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> - xx</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">reward_settings: </span><span class="token prefix inserted">+</span><span class="token line">  enable: false</span></span><span class="token coord">---  </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="添加版权协议"><a href="#添加版权协议" class="headerlink" title="添加版权协议"></a>添加版权协议</h3><p>在主题配置文件中，搜索  <code>creative_commons</code>  选项，进行如下修改：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">creative_commons</span><span class="token punctuation">:</span>  <span class="token key atrule">license</span><span class="token punctuation">:</span> by<span class="token punctuation">-</span>nc<span class="token punctuation">-</span>sa <span class="token comment"># 协议名</span>  <span class="token key atrule">size</span><span class="token punctuation">:</span> small <span class="token comment"># 字体大小</span>  <span class="token key atrule">sidebar</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 是否在侧边栏显示协议图标</span>  <span class="token key atrule">post</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 开启版权声明</span>  <span class="token key atrule">language</span><span class="token punctuation">:</span> deed.zh <span class="token comment"># 协议语言</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>默认版权侧边栏颜色修改，打开 <code>variables.styl</code> 定义颜色：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token variable-declaration"><span class="token variable">$post-copyright-border</span>    <span class="token operator">=</span> <span class="token hexcode">#81a6ed</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开 <code>styles.styl</code> 替换样式：</p><pre class="line-numbers language-stylus" data-language="stylus"><code class="language-stylus"><span class="token selector"><span class="token comment">/* post-版权声明 */</span>.post-copyright ul <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">border-left</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token unit">px</span> solid $post-copyright-border<span class="token punctuation">;</span></span><span class="token punctuation">&#125;</span><span class="token selector">.post-copyright ul li a <span class="token punctuation">&#123;</span></span>  <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $custom-link<span class="token punctuation">;</span></span>  <span class="token property-declaration"><span class="token property">border-bottom</span><span class="token punctuation">:</span> none</span>  <span class="token selector">&amp;:hover <span class="token punctuation">&#123;</span></span>    <span class="token property-declaration"><span class="token property">color</span><span class="token punctuation">:</span> $custom-link-hover<span class="token punctuation">;</span></span>    <span class="token property-declaration"><span class="token property">border-bottom</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">px</span> solid $custom-link-hover<span class="token punctuation">;</span></span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="底部标签修改"><a href="#底部标签修改" class="headerlink" title="底部标签修改"></a>底部标签修改</h3><p>底部标签默认使用 <code>#</code> 当前缀，打开主题配置文件搜索 <code>tag_icon</code>：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">tag_icon</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 改用图标前缀</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="底部页脚修改"><a href="#底部页脚修改" class="headerlink" title="底部页脚修改"></a>底部页脚修改</h3><p>打开主题配置文件搜索 <code>footer</code>：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">footer</span><span class="token punctuation">:</span>  <span class="token comment"># 底部信息区</span>  <span class="token key atrule">since</span><span class="token punctuation">:</span> <span class="token number">2017</span> <span class="token comment"># 建站时间</span>  <span class="token key atrule">icon</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>heartbeat <span class="token comment"># 图标名称,Icon name in Font Awesome</span>    <span class="token key atrule">animated</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 开启动画</span>    <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token string">"#ff0000"</span> <span class="token comment"># 图标颜色</span>  <span class="token key atrule">copyright</span><span class="token punctuation">:</span>  <span class="token key atrule">powered</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 隐藏Hexo &amp; NexT</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210709161721.png" alt="原始页脚"></p><p><img src="https://cdn.jsdelivr.net/gh/moyuhs/images/20210709161825.png" alt="新页脚"></p><h2 id="功能拓展"><a href="#功能拓展" class="headerlink" title="功能拓展"></a>功能拓展</h2><h3 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h3><p>使用插件：<a href="https://github.com/wzpan/hexo-generator-search">hexo-generator-search</a></p><p>1.在博客根目录执行以下命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.在主题配置文件中 → 搜索  <code>local_search</code>  选项，开启搜索：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">local_search</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 默认为false,设置为true</span>  <span class="token key atrule">trigger</span><span class="token punctuation">:</span> auto  <span class="token key atrule">top_n_per_article</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token key atrule">unescape</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">preload</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.如果你不想改篇文章出现在搜索结过中，可文章 <code>Front-matter</code> 中加入<code>indexing: false</code>。</p><p>4.打开博客配置文件添加搜索文件配置(可选)</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#搜索配置   </span><span class="token key atrule">search</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> search/search.xml <span class="token comment"># 搜索文件生成路径</span>  <span class="token key atrule">field</span><span class="token punctuation">:</span> post <span class="token comment"># 指定搜索范围，可选 post | page | all</span>  <span class="token key atrule">format</span><span class="token punctuation">:</span> html <span class="token comment"># 指定页面内容形式，可选 html | raw (Markdown) | excerpt | more</span>  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">10000</span> <span class="token comment"># 限定搜索结果条数</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Url-持久化"><a href="#Url-持久化" class="headerlink" title="Url 持久化"></a>Url 持久化</h3><p>使用插件：<a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a></p><p>Hexo默认的文章链接形式为 <code>:year/:month/:day/:title/</code>，是一个四级url，并且可能造成 url 过长，会影响网站的SEO，对搜索引擎是十分不友好。</p><p>在博客根目录安装  <code>hexo-abbrlink</code>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-abbrlink --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开站点配置文件，搜索  <code>permalink</code>  改为如下配置：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#permalink: :year/:month/:day/:title/</span><span class="token key atrule">permalink</span><span class="token punctuation">:</span> posts/<span class="token punctuation">:</span>abbrlink/<span class="token key atrule">abbrlink</span><span class="token punctuation">:</span>  <span class="token key atrule">alg</span><span class="token punctuation">:</span> crc32  <span class="token comment"># 算法：crc16(default) and crc32</span>  <span class="token key atrule">rep</span><span class="token punctuation">:</span> hex    <span class="token comment"># 进制：dec(default) and hex</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="代码压缩"><a href="#代码压缩" class="headerlink" title="代码压缩"></a>代码压缩</h3><p>使用插件：<a href="https://github.com/chenzhutian/hexo-all-minifier">hexo-all-minifier</a></p><p>在博客根目录下执行安装命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-all-minifier --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开站点配置文件添加代码压缩规则：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Minifier &amp; Optimization plugin</span><span class="token comment">## See: https://github.com/chenzhutian/hexo-all-minifier</span><span class="token key atrule">all_minifier</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">html_minifier</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">css_minifier</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>     <span class="token punctuation">-</span> <span class="token string">'*.min.css'</span><span class="token key atrule">js_minifier</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>     <span class="token punctuation">-</span> <span class="token string">'*.min.js'</span>    <span class="token key atrule">image_minifier</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>更多进阶配置请参考我的 <a href="https://yileaf.com/archives/15baca53.html">Hexo-NexT 后续优化</a> 这篇文章</p></blockquote><h2 id="部署站点"><a href="#部署站点" class="headerlink" title="部署站点"></a>部署站点</h2><p>1.在博客根目录安装部署插件：<a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-git</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-deployer-git --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.打开站点配置文件，搜索 <code>deploy</code> 选项，填写对应Git仓库地址：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repo</span><span class="token punctuation">:</span>   <span class="token key atrule">github</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span><span class="token important">******.git</span><span class="token punctuation">,</span>master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>3.推送博客</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;</span> hexo g <span class="token operator">&amp;</span> hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 美化 </tag>
            
            <tag> website </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
