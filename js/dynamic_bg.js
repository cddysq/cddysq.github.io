const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");let cw=canvas.width=window.innerWidth,cx=cw/2,ch=canvas.height=window.innerHeight,cy=ch/2;ctx.fillStyle="#000";const linesNum=16,linesRy=[];let requestId=null;function Line(t){this.flag=t,this.a={},this.b={},"v"==t?(this.a.y=0,this.b.y=ch,this.a.x=randomIntFromInterval(0,ch),this.b.x=randomIntFromInterval(0,ch)):"h"==t&&(this.a.x=0,this.b.x=cw,this.a.y=randomIntFromInterval(0,cw),this.b.y=randomIntFromInterval(0,cw)),this.va=randomIntFromInterval(25,100)/100,this.vb=randomIntFromInterval(25,100)/100,this.draw=function(){ctx.strokeStyle="#ccc",ctx.beginPath(),ctx.moveTo(this.a.x,this.a.y),ctx.lineTo(this.b.x,this.b.y),ctx.stroke()},this.update=function(){"v"==this.flag?(this.a.x+=this.va,this.b.x+=this.vb):"h"==t&&(this.a.y+=this.va,this.b.y+=this.vb),this.edges()},this.edges=function(){"v"==this.flag?((this.a.x<0||this.a.x>cw)&&(this.va*=-1),(this.b.x<0||this.b.x>cw)&&(this.vb*=-1)):"h"==t&&((this.a.y<0||this.a.y>ch)&&(this.va*=-1),(this.b.y<0||this.b.y>ch)&&(this.vb*=-1))}}for(let t=0;t<linesNum;t++){const c=t%2==0?"h":"v",d=new Line(c);linesRy.push(d)}function Draw(){let n,i;for(requestId=window.requestAnimationFrame(Draw),ctx.clearRect(0,0,cw,ch),i=0;i<linesRy.length;i++)n=linesRy[i],n.draw(),n.update();for(i=0;i<linesRy.length;i++){n=linesRy[i];for(let t=i+1;t<linesRy.length;t++){var e=linesRy[t];Intersect2lines(n,e)}}}function Init(){for(let t=linesRy.length=0;t<linesNum;t++){var n=new Line(t%2==0?"h":"v");linesRy.push(n)}requestId&&(window.cancelAnimationFrame(requestId),requestId=null),cw=canvas.width=window.innerWidth,cx=cw/2,ch=canvas.height=window.innerHeight,cy=ch/2,Draw()}function Intersect2lines(t,n){var i=t.a,e=t.b,s=n.a,t=n.b,n=(t.y-s.y)*(e.x-i.x)-(t.x-s.x)*(e.y-i.y),t=((t.x-s.x)*(i.y-s.y)-(t.y-s.y)*(i.x-s.x))/n,s=((e.x-i.x)*(i.y-s.y)-(e.y-i.y)*(i.x-s.x))/n,n=i.x+t*(e.x-i.x),i=i.y+t*(e.y-i.y);0<t&&0<s&&markPoint({x:n,y:i})}function markPoint(t){ctx.beginPath(),ctx.arc(t.x,t.y,2,0,2*Math.PI),ctx.fill()}function randomIntFromInterval(t,n){return~~(Math.random()*(n-t+1)+t)}setTimeout(function(){Init(),addEventListener("resize",Init,!1)},15);